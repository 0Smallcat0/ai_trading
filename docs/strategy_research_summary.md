# 策略研究總結報告

## 1. 策略類型分析

在本研究中，我們分析了四種主要的交易策略類型，每種類型都有其獨特的特點和適用場景：

### 1.1 趨勢跟蹤策略 (Trend Following)

趨勢跟蹤策略基於市場趨勢的持續性，當市場形成明確趨勢時進行交易。

**主要特點**：
- 在強勁的趨勢市場中表現優異
- 通常持倉時間較長
- 可能會錯過趨勢初期的部分收益
- 在震盪市場中容易產生虧損

**代表策略**：
- 移動平均線交叉：當短期移動平均線上穿長期移動平均線時買入，下穿時賣出
- MACD (移動平均收斂散度)：利用兩條不同速度的移動平均線之間的關係產生交易訊號
- 拋物線轉向 (SAR)：根據價格和加速因子計算的指標，用於確定趨勢轉向點

**適用市場**：
- 強勁的牛市或熊市
- 具有明確方向性的市場
- 波動較小的市場

### 1.2 均值回歸策略 (Mean Reversion)

均值回歸策略基於價格會回歸到其均值或趨勢線的假設，當價格偏離過遠時進行交易。

**主要特點**：
- 在震盪市場中表現優異
- 通常持倉時間較短
- 在強趨勢市場中容易產生虧損
- 需要準確定義「過度偏離」的標準

**代表策略**：
- 布林通道：當價格觸及下軌時買入，觸及上軌時賣出
- 統計套利：利用相關資產之間的價格差異進行交易
- 對數回歸：基於價格與其長期趨勢線的偏離程度進行交易

**適用市場**：
- 震盪市場
- 具有明確價格範圍的市場
- 相關性強的資產對

### 1.3 震盪指標策略 (Oscillator)

震盪指標策略基於市場的超買超賣狀態，當市場超買時賣出，超賣時買入。

**主要特點**：
- 在震盪市場中表現優異
- 可以捕捉市場轉折點
- 在強趨勢市場中容易產生錯誤訊號
- 需要準確定義超買超賣的閾值

**代表策略**：
- RSI (相對強弱指標)：當 RSI 低於 30 時買入，高於 70 時賣出
- 隨機指標 (Stochastic)：利用收盤價在最高價和最低價範圍內的位置產生交易訊號
- 威廉指標 (Williams %R)：類似隨機指標，但計算方式不同

**適用市場**：
- 震盪市場
- 具有明確價格範圍的市場
- 波動較大的市場

### 1.4 事件驅動策略 (Event-Driven)

事件驅動策略基於特定事件或新聞對市場的影響，當發生特定事件時進行交易。

**主要特點**：
- 可以捕捉市場對特定事件的反應
- 通常持倉時間較短
- 需要快速的執行能力
- 需要準確的事件識別和分析

**代表策略**：
- 財報公布：基於公司財報公布後的市場反應進行交易
- 併購事件：基於併購消息對相關公司股價的影響進行交易
- 政策變化：基於政策變化對特定行業的影響進行交易

**適用市場**：
- 對特定事件敏感的市場
- 流動性較好的市場
- 資訊透明度較高的市場

## 2. 模型架構選擇

根據不同的策略類型和市場特點，我們評估了多種模型架構的適用性：

### 2.1 機器學習模型

**隨機森林 (Random Forest)**：
- **優點**：可處理非線性關係，不易過擬合，可提供特徵重要性
- **缺點**：對時間序列的時間依賴性建模能力有限
- **適用策略**：均值回歸、震盪指標

**XGBoost/LightGBM**：
- **優點**：高效能，可處理大量特徵，優秀的預測能力
- **缺點**：需要較多的特徵工程，可能需要較大的訓練集
- **適用策略**：趨勢跟蹤、均值回歸、事件驅動

**支持向量機 (SVM)**：
- **優點**：在高維空間中表現良好，適合處理複雜的分類問題
- **缺點**：計算成本較高，對參數敏感
- **適用策略**：震盪指標、事件驅動

### 2.2 深度學習模型

**LSTM (長短期記憶網絡)**：
- **優點**：能夠捕捉長期依賴關係，適合時間序列資料
- **缺點**：需要大量資料，訓練時間長，容易過擬合
- **適用策略**：趨勢跟蹤、事件驅動

**GRU (門控循環單元)**：
- **優點**：類似 LSTM 但計算效率更高，參數更少
- **缺點**：捕捉長期依賴關係的能力可能不如 LSTM
- **適用策略**：趨勢跟蹤、事件驅動

**Transformer**：
- **優點**：可以並行處理序列資料，捕捉全局依賴關係
- **缺點**：需要大量資料，計算成本高
- **適用策略**：趨勢跟蹤、事件驅動、多資產策略

### 2.3 規則型模型

**技術指標組合**：
- **優點**：簡單直觀，計算效率高，易於解釋
- **缺點**：靈活性有限，難以捕捉複雜的市場模式
- **適用策略**：趨勢跟蹤、均值回歸、震盪指標

**統計模型**：
- **優點**：理論基礎扎實，可提供統計顯著性
- **缺點**：通常假設線性關係，對異常值敏感
- **適用策略**：均值回歸、統計套利

## 3. 模型輸入特徵與輸出

### 3.1 輸入特徵

根據不同的策略類型，我們選擇了以下特徵作為模型輸入：

**技術指標特徵**：
- 價格特徵：開盤價、最高價、最低價、收盤價、成交量
- 趨勢指標：移動平均線 (SMA, EMA)、MACD、拋物線轉向 (SAR)
- 震盪指標：RSI、隨機指標、威廉指標
- 波動性指標：布林通道、ATR (平均真實範圍)
- 成交量指標：OBV (累積交易量)、資金流量指標

**基本面特徵**：
- 財務比率：P/E (本益比)、P/B (股價淨值比)、ROE (股東權益報酬率)
- 成長指標：EPS 成長率、營收成長率
- 股利指標：殖利率、配息率
- 產業指標：產業分類、市場佔有率

**情緒特徵**：
- 市場情緒：VIX (恐慌指數)、市場廣度
- 新聞情緒：新聞情緒分數、新聞提及頻率
- 社交媒體：社交媒體情緒、討論熱度

**市場結構特徵**：
- 市場微結構：買賣價差、市場深度
- 交易活動：大單交易、機構持股變化
- 市場流動性：成交量比率、換手率

### 3.2 模型輸出

根據不同的應用場景，我們設計了以下模型輸出：

**分類輸出**：
- 價格方向：上漲 (1) 或下跌 (0)
- 交易訊號：買入 (1)、持有 (0) 或賣出 (-1)
- 市場狀態：趨勢市場、震盪市場或轉折點

**回歸輸出**：
- 價格預測：未來 n 天的價格或收益率
- 風險預測：未來 n 天的波動率
- 信心分數：預測的可信度

## 4. 資料集分割

為了確保模型的有效性和避免前瞻偏差，我們採用了以下資料集分割方法：

### 4.1 時間序列分割

由於金融資料具有時間序列特性，我們使用時間序列分割方法，確保訓練資料在時間上先於驗證和測試資料：

- **訓練集**：2010-01-01 至 2018-12-31 (約 60%)
- **驗證集**：2019-01-01 至 2020-12-31 (約 20%)
- **測試集**：2021-01-01 至 2022-12-31 (約 20%)

### 4.2 避免前瞻偏差

為了避免前瞻偏差 (Look-ahead Bias)，我們採取了以下措施：

- 確保特徵計算只使用當前時間點之前的資料
- 對於需要未來資料的指標（如未來 n 天的收益率），明確區分為目標變數而非特徵
- 在回測中嚴格按照時間順序進行，不使用未來資料

### 4.3 處理市場結構變化

為了應對市場結構變化，我們採用了以下策略：

- 定期重新訓練模型，如每季度或每半年
- 使用滾動窗口方法，只使用最近 n 年的資料進行訓練
- 在特徵工程中加入市場結構變化的指標

## 5. 特徵資料集準備

### 5.1 特徵工程

我們使用 `src/core/features.py` 模組進行特徵工程，主要包括以下步驟：

- **特徵計算**：計算各種技術指標、基本面指標和情緒指標
- **特徵轉換**：對特徵進行標準化、歸一化或對數轉換
- **特徵選擇**：使用特徵重要性、相關性分析或主成分分析進行特徵選擇
- **特徵組合**：創建特徵交互項或多項式特徵

### 5.2 資料清理

為了確保資料質量，我們進行了以下資料清理工作：

- **缺失值處理**：使用前向填充、插值或均值填充處理缺失值
- **異常值處理**：使用 Z-score 或 IQR 方法識別和處理異常值
- **重複值處理**：移除重複的資料點
- **時間對齊**：確保不同資料源的時間戳對齊

## 6. 結論與建議

### 6.1 策略選擇建議

根據我們的研究，我們建議採用以下策略組合：

1. **核心策略**：趨勢跟蹤 + 均值回歸的混合策略
   - 在明確趨勢市場中使用趨勢跟蹤策略
   - 在震盪市場中使用均值回歸策略
   - 使用市場狀態分類模型自動切換策略

2. **輔助策略**：事件驅動策略
   - 在重要事件（如財報公布、政策變化）發生時使用
   - 與核心策略結合，提高整體表現

### 6.2 模型選擇建議

根據不同的策略類型，我們建議採用以下模型：

1. **趨勢跟蹤策略**：LSTM 或 GRU
   - 能夠捕捉長期趨勢和時間依賴關係
   - 適合預測價格方向和趨勢持續時間

2. **均值回歸策略**：XGBoost 或 LightGBM
   - 能夠處理複雜的非線性關係
   - 適合識別超買超賣狀態和回歸時機

3. **事件驅動策略**：Transformer + XGBoost
   - Transformer 處理文本和時間序列資料
   - XGBoost 整合多種特徵進行最終預測

### 6.3 下一步工作

為了進一步提升策略表現，我們建議進行以下工作：

1. **模型訓練與調優**：
   - 實現完整的訓練和推論管道
   - 使用網格搜索、隨機搜索或貝葉斯優化進行超參數調優
   - 定義明確的績效指標和接受閾值

2. **模型解釋性**：
   - 使用 SHAP 或 LIME 等工具提高模型解釋性
   - 分析特徵重要性，優化特徵選擇

3. **模型治理**：
   - 實現模型版本追蹤和管理
   - 設計部署和回滾機制
   - 建立模型監控和評估框架
