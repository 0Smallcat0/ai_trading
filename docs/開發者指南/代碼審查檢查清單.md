# ä»£ç¢¼å¯©æŸ¥æª¢æŸ¥æ¸…å–®

**ç‰ˆæœ¬**: v1.0  
**æ›´æ–°æ—¥æœŸ**: 2025-07-17  
**é©ç”¨ç¯„åœ**: æ‰€æœ‰ Pull Request å¯©æŸ¥

æœ¬æª¢æŸ¥æ¸…å–®ç¢ºä¿æ–°ä»£ç¢¼ä½¿ç”¨æ¨è–¦çš„æ¨¡çµ„çµæ§‹ï¼Œé¿å…ä½¿ç”¨å·²éæ™‚çš„æª”æ¡ˆã€‚

## ğŸ” æ¨¡çµ„ä½¿ç”¨æª¢æŸ¥

### âŒ ç¦æ­¢ä½¿ç”¨çš„éæ™‚æ¨¡çµ„

åœ¨ä»£ç¢¼å¯©æŸ¥ä¸­ï¼Œä»¥ä¸‹å°å…¥æ‡‰è¢«æ¨™è¨˜ç‚ºéœ€è¦ä¿®æ”¹ï¼š

#### UI æ¨¡çµ„
```python
# âŒ ç¦æ­¢ï¼šå·²éæ™‚çš„ UI æ¨¡çµ„
from src.ui.web_ui_production_legacy import main
from src.ui.web_ui_production_legacy import *

# âœ… æ¨è–¦æ›¿ä»£
from src.ui.web_ui_production import main
from src.ui.web_ui_redesigned import main  # è¨­è¨ˆåŸå‹ç‰ˆ
```

#### é…ç½®ç®¡ç†
```python
# âŒ ç¦æ­¢ï¼šç°¡å–®åŒ…è£å™¨ï¼ˆå·²éæ™‚ï¼‰
from src.core.config_manager import parse_args
from src.core.config_manager import init_system

# âœ… æ¨è–¦æ›¿ä»£
from src.utils.config_manager import create_default_config_manager
from src.core.config_validator import ConfigValidator
```

#### é¢¨éšªç®¡ç†
```python
# âŒ ç¦æ­¢ï¼šå¤§å‹å–®ä¸€æª”æ¡ˆï¼ˆå·²éæ™‚ï¼‰
from src.core.risk_control import RiskManager
from src.core.risk_control import RiskMetricsCalculator

# âœ… æ¨è–¦æ›¿ä»£
from src.risk_management.risk_manager_refactored import RiskManager
from src.risk_management.risk_metrics import RiskMetricsCalculator
from src.risk_management.stop_loss import StopLossManager
from src.risk_management.position_sizing import PositionSizer
```

#### IB é©é…å™¨
```python
# âŒ ç¦æ­¢ï¼šåŸå§‹ç‰ˆæœ¬ï¼ˆå·²éæ™‚ï¼‰
from src.execution.ib_adapter import IBAdapter

# âœ… æ¨è–¦æ›¿ä»£
from src.execution.ib_adapter_refactored import IBAdapterRefactored
from src.execution.ib_adapter_core import IBCore
from src.execution.ib_adapter_orders import OrderManager
```

## âœ… ä»£ç¢¼å¯©æŸ¥æª¢æŸ¥é …ç›®

### 1. æ¨¡çµ„å°å…¥æª¢æŸ¥
- [ ] æª¢æŸ¥æ˜¯å¦ä½¿ç”¨äº†éæ™‚æ¨¡çµ„
- [ ] ç¢ºèªä½¿ç”¨æ¨è–¦çš„æ¨¡çµ„çµæ§‹
- [ ] é©—è­‰å°å…¥èªå¥çš„æ­£ç¢ºæ€§

### 2. ä»£ç¢¼å“è³ªæª¢æŸ¥
- [ ] Pylint è©•åˆ† â‰¥8.5/10
- [ ] å‡½æ•¸é•·åº¦ â‰¤50 è¡Œ
- [ ] æª”æ¡ˆå¤§å° â‰¤300 è¡Œ
- [ ] McCabe è¤‡é›œåº¦ â‰¤10

### 3. æ–‡æª”æª¢æŸ¥
- [ ] æ‰€æœ‰å…¬å…±å‡½æ•¸æœ‰ Google Style Docstring
- [ ] é¡åˆ¥æœ‰å®Œæ•´çš„æ–‡æª”èªªæ˜
- [ ] è¤‡é›œé‚è¼¯æœ‰é©ç•¶çš„è¨»é‡‹

### 4. æ¸¬è©¦æª¢æŸ¥
- [ ] æ–°åŠŸèƒ½æœ‰å°æ‡‰çš„æ¸¬è©¦ç”¨ä¾‹
- [ ] æ¸¬è©¦è¦†è“‹ç‡ â‰¥80%ï¼ˆæ ¸å¿ƒæ¨¡çµ„ â‰¥90%ï¼‰
- [ ] æ¸¬è©¦ä½¿ç”¨æ¨è–¦çš„æ¨¡çµ„çµæ§‹

### 5. å®‰å…¨æª¢æŸ¥
- [ ] æ²’æœ‰ç¡¬ç·¨ç¢¼çš„æ•æ„Ÿè³‡è¨Š
- [ ] è¼¸å…¥é©—è­‰å®Œæ•´
- [ ] éŒ¯èª¤è™•ç†é©ç•¶

## ğŸ”§ è‡ªå‹•åŒ–æª¢æŸ¥å·¥å…·

### Pre-commit Hook é…ç½®

å‰µå»º `.pre-commit-config.yaml`ï¼š

```yaml
repos:
  - repo: local
    hooks:
      - id: check-deprecated-imports
        name: Check for deprecated module imports
        entry: python scripts/check_deprecated_imports.py
        language: python
        files: \.py$
        
      - id: pylint
        name: Pylint
        entry: pylint
        language: python
        files: \.py$
        args: [--rcfile=.pylintrc, --fail-under=8.5]
        
      - id: black
        name: Black
        entry: black
        language: python
        files: \.py$
        
      - id: isort
        name: isort
        entry: isort
        language: python
        files: \.py$
```

### CI/CD æª¢æŸ¥è…³æœ¬

åœ¨ GitHub Actions ä¸­æ·»åŠ æª¢æŸ¥ï¼š

```yaml
name: Code Quality Check
on: [pull_request]

jobs:
  check-deprecated-modules:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Set up Python
        uses: actions/setup-python@v2
        with:
          python-version: 3.10
      - name: Check for deprecated imports
        run: python scripts/check_deprecated_imports.py
      - name: Run Pylint
        run: pylint src/ --fail-under=8.5
```

## ğŸ“ å¯©æŸ¥æµç¨‹

### 1. æäº¤å‰æª¢æŸ¥
é–‹ç™¼è€…åœ¨æäº¤ PR å‰æ‡‰ï¼š
- é‹è¡Œ `python scripts/check_deprecated_imports.py`
- åŸ·è¡Œ `pylint src/` ç¢ºä¿è©•åˆ† â‰¥8.5
- é‹è¡Œæ¸¬è©¦å¥—ä»¶ç¢ºä¿é€šé

### 2. PR å¯©æŸ¥æ­¥é©Ÿ
å¯©æŸ¥è€…æ‡‰æŒ‰ä»¥ä¸‹é †åºæª¢æŸ¥ï¼š

1. **å¿«é€Ÿæƒæ**: æª¢æŸ¥æ˜¯å¦æœ‰æ˜é¡¯çš„éæ™‚æ¨¡çµ„ä½¿ç”¨
2. **è©³ç´°å¯©æŸ¥**: ä½¿ç”¨æœ¬æª¢æŸ¥æ¸…å–®é€é …æª¢æŸ¥
3. **æ¸¬è©¦é©—è­‰**: ç¢ºèªæ¸¬è©¦è¦†è“‹ç‡å’Œå“è³ª
4. **æ–‡æª”æª¢æŸ¥**: é©—è­‰æ–‡æª”å®Œæ•´æ€§å’Œæº–ç¢ºæ€§

### 3. å¯©æŸ¥çµæœè™•ç†
- **é€šé**: æ‰€æœ‰æª¢æŸ¥é …ç›®éƒ½ç¬¦åˆè¦æ±‚
- **éœ€è¦ä¿®æ”¹**: æ˜ç¢ºæŒ‡å‡ºéœ€è¦ä¿®æ”¹çš„é …ç›®
- **æ‹’çµ•**: å­˜åœ¨åš´é‡çš„å“è³ªå•é¡Œæˆ–ä½¿ç”¨ç¦æ­¢çš„æ¨¡çµ„

## ğŸš¨ å¸¸è¦‹å•é¡Œå’Œè§£æ±ºæ–¹æ¡ˆ

### Q1: ç™¼ç¾ä½¿ç”¨éæ™‚æ¨¡çµ„æ€éº¼è¾¦ï¼Ÿ
**A**: 
1. æŒ‡å‡ºå…·é«”çš„éæ™‚å°å…¥
2. æä¾›æ¨è–¦çš„æ›¿ä»£æ–¹æ¡ˆ
3. å¦‚æœéœ€è¦ï¼Œæä¾›é·ç§»ç¯„ä¾‹

### Q2: å¦‚ä½•è™•ç†å‘å¾Œç›¸å®¹æ€§å•é¡Œï¼Ÿ
**A**:
1. å„ªå…ˆä½¿ç”¨æ¨è–¦æ¨¡çµ„
2. å¦‚æœå¿…é ˆä½¿ç”¨éæ™‚æ¨¡çµ„ï¼Œæ·»åŠ è¨»é‡‹èªªæ˜åŸå› 
3. å‰µå»º Issue è¿½è¹¤å¾ŒçºŒé·ç§»è¨ˆåŠƒ

### Q3: æ–°é–‹ç™¼è€…ä¸ç†Ÿæ‚‰æ¨è–¦æ¨¡çµ„æ€éº¼è¾¦ï¼Ÿ
**A**:
1. æä¾› [é–‹ç™¼æœ€ä½³å¯¦è¸](é–‹ç™¼æœ€ä½³å¯¦è¸.md) æ–‡æª”é€£çµ
2. åœ¨å¯©æŸ¥ä¸­æä¾›å…·é«”çš„ä¿®æ”¹å»ºè­°
3. é¼“å‹µåƒè€ƒç¾æœ‰çš„è‰¯å¥½ç¯„ä¾‹

## ğŸ“Š å¯©æŸ¥çµ±è¨ˆ

å»ºè­°è¿½è¹¤ä»¥ä¸‹æŒ‡æ¨™ï¼š
- ä½¿ç”¨éæ™‚æ¨¡çµ„çš„ PR æ•¸é‡
- ä»£ç¢¼å“è³ªè©•åˆ†è¶¨å‹¢
- å¯©æŸ¥é€±æœŸæ™‚é–“
- é–‹ç™¼è€…æ»¿æ„åº¦

## ğŸ”„ æŒçºŒæ”¹é€²

æœ¬æª¢æŸ¥æ¸…å–®æ‡‰å®šæœŸæ›´æ–°ï¼š
- æ ¹æ“šæ–°çš„éæ™‚æ¨¡çµ„èª¿æ•´ç¦æ­¢æ¸…å–®
- åŸºæ–¼å¯©æŸ¥ç¶“é©—å„ªåŒ–æª¢æŸ¥é …ç›®
- æ”¶é›†é–‹ç™¼è€…åé¥‹æ”¹é€²æµç¨‹

---

**ç¶­è­·åœ˜éšŠ**: AI Trading System Development Team  
**æœ€å¾Œæ›´æ–°**: 2025-07-17

**ä½¿ç”¨èªªæ˜**: 
1. å¯©æŸ¥è€…æ‡‰åœ¨æ¯æ¬¡ PR å¯©æŸ¥æ™‚ä½¿ç”¨æ­¤æª¢æŸ¥æ¸…å–®
2. é–‹ç™¼è€…æ‡‰åœ¨æäº¤ PR å‰è‡ªæˆ‘æª¢æŸ¥
3. å¦‚æœ‰ç–‘å•ï¼Œè«‹åƒè€ƒ [æª”æ¡ˆçµæ§‹è®Šæ›´èªªæ˜](../æª”æ¡ˆçµæ§‹è®Šæ›´èªªæ˜.md)
