# é–‹ç™¼è€…æŒ‡å—

æœ¬æŒ‡å—ç‚º AI è‚¡ç¥¨è‡ªå‹•äº¤æ˜“ç³»çµ±çš„é–‹ç™¼è€…æä¾›å®Œæ•´çš„é–‹ç™¼ç’°å¢ƒè¨­ç½®ã€æ¶æ§‹èªªæ˜ã€ç·¨ç¢¼è¦ç¯„å’Œæœ€ä½³å¯¦è¸ã€‚

## ğŸ“š ç›®éŒ„

1. [é–‹ç™¼ç’°å¢ƒè¨­ç½®](#é–‹ç™¼ç’°å¢ƒè¨­ç½®)
2. [ç³»çµ±æ¶æ§‹æ¦‚è¦½](#ç³»çµ±æ¶æ§‹æ¦‚è¦½)
3. [é–‹ç™¼å·¥ä½œæµç¨‹](#é–‹ç™¼å·¥ä½œæµç¨‹)
4. [ç·¨ç¢¼è¦ç¯„](#ç·¨ç¢¼è¦ç¯„)
5. [æ¸¬è©¦æŒ‡å—](#æ¸¬è©¦æŒ‡å—)
6. [éƒ¨ç½²æµç¨‹](#éƒ¨ç½²æµç¨‹)
7. [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)
8. [è²¢ç»æŒ‡å—](#è²¢ç»æŒ‡å—)

---

## ğŸ› ï¸ é–‹ç™¼ç’°å¢ƒè¨­ç½®

### ç³»çµ±è¦æ±‚
- **ä½œæ¥­ç³»çµ±**ï¼šWindows 10+, macOS 10.15+, Ubuntu 18.04+
- **Python**ï¼š3.8 æˆ–æ›´é«˜ç‰ˆæœ¬
- **è¨˜æ†¶é«”**ï¼š8GB ä»¥ä¸Šï¼ˆå»ºè­° 16GBï¼‰
- **å„²å­˜ç©ºé–“**ï¼š10GB ä»¥ä¸Šå¯ç”¨ç©ºé–“
- **ç¶²è·¯**ï¼šç©©å®šçš„ç¶²è·¯é€£æ¥

### å¿…è¦è»Ÿé«”å®‰è£

#### 1. Python ç’°å¢ƒ
```bash
# æª¢æŸ¥ Python ç‰ˆæœ¬
python --version  # éœ€è¦ 3.8+

# å®‰è£ Poetryï¼ˆä¾è³´ç®¡ç†å·¥å…·ï¼‰
curl -sSL https://install.python-poetry.org | python3 -
```

#### 2. Git è¨­ç½®
```bash
# è¨­ç½® Git ç”¨æˆ¶è³‡è¨Š
git config --global user.name "Your Name"
git config --global user.email "your.email@example.com"

# è¨­ç½® Git Flow
git flow init
```

#### 3. IDE æ¨è–¦è¨­ç½®
**Visual Studio Code æ“´å±•**ï¼š
- Python
- Pylint
- Black Formatter
- GitLens
- Docker
- YAML

**PyCharm è¨­ç½®**ï¼š
- å•Ÿç”¨ Poetry æ•´åˆ
- è¨­ç½® Code Style ç‚º Google Style
- å•Ÿç”¨ Type Checking

### å°ˆæ¡ˆè¨­ç½®

#### 1. å…‹éš†å°ˆæ¡ˆ
```bash
git clone https://github.com/your-org/ai-trading-system.git
cd ai-trading-system
```

#### 2. ç’°å¢ƒé…ç½®
```bash
# å®‰è£ä¾è³´
poetry install

# å•Ÿå‹•è™›æ“¬ç’°å¢ƒ
poetry shell

# è¤‡è£½ç’°å¢ƒé…ç½®æ–‡ä»¶
cp .env.example .env
```

#### 3. è³‡æ–™åº«è¨­ç½®
```bash
# åˆå§‹åŒ–è³‡æ–™åº«
python scripts/setup_database.py

# åŸ·è¡Œè³‡æ–™åº«é·ç§»
python scripts/migrate_database.py
```

#### 4. é©—è­‰å®‰è£
```bash
# åŸ·è¡Œæ¸¬è©¦
poetry run pytest

# å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨
poetry run python -m streamlit run src/ui/web_ui.py
```

---

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹æ¦‚è¦½

### æ•´é«”æ¶æ§‹
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯ UI       â”‚    â”‚   API å±¤        â”‚    â”‚   æ ¸å¿ƒæœå‹™      â”‚
â”‚   (Streamlit)   â”‚â—„â”€â”€â–ºâ”‚   (FastAPI)     â”‚â—„â”€â”€â–ºâ”‚   (Core)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚                        â”‚
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚   ä¸­é–“ä»¶        â”‚    â”‚   è³‡æ–™å±¤        â”‚
                       â”‚   (Auth/Log)    â”‚    â”‚   (Database)    â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç›®éŒ„çµæ§‹
```
src/
â”œâ”€â”€ api/                    # API å±¤
â”‚   â”œâ”€â”€ main.py            # FastAPI ä¸»æ‡‰ç”¨
â”‚   â”œâ”€â”€ routers/           # API è·¯ç”±
â”‚   â”œâ”€â”€ middleware/        # ä¸­é–“ä»¶
â”‚   â””â”€â”€ models/            # API æ¨¡å‹
â”œâ”€â”€ core/                  # æ ¸å¿ƒæ¥­å‹™é‚è¼¯
â”‚   â”œâ”€â”€ services/          # æ¥­å‹™æœå‹™
â”‚   â”œâ”€â”€ models/            # è³‡æ–™æ¨¡å‹
â”‚   â””â”€â”€ utils/             # å·¥å…·å‡½æ•¸
â”œâ”€â”€ ui/                    # ç”¨æˆ¶ä»‹é¢
â”‚   â”œâ”€â”€ pages/             # é é¢çµ„ä»¶
â”‚   â”œâ”€â”€ components/        # UI çµ„ä»¶
â”‚   â””â”€â”€ utils/             # UI å·¥å…·
â”œâ”€â”€ database/              # è³‡æ–™åº«å±¤
â”‚   â”œâ”€â”€ models/            # ORM æ¨¡å‹
â”‚   â”œâ”€â”€ migrations/        # è³‡æ–™åº«é·ç§»
â”‚   â””â”€â”€ repositories/      # è³‡æ–™å­˜å–å±¤
â”œâ”€â”€ monitoring/            # ç›£æ§ç³»çµ±
â”œâ”€â”€ logging/               # æ—¥èªŒç³»çµ±
â””â”€â”€ tests/                 # æ¸¬è©¦ä»£ç¢¼
```

### æ ¸å¿ƒæ¨¡çµ„èªªæ˜

#### 1. è³‡æ–™ç®¡ç†æ¨¡çµ„ (`src/core/data_management_service.py`)
- å¸‚å ´è³‡æ–™æ”¶é›†å’Œè™•ç†
- è³‡æ–™æ¸…ç†å’Œé©—è­‰
- è³‡æ–™å­˜å„²å’Œæª¢ç´¢

#### 2. ç­–ç•¥ç®¡ç†æ¨¡çµ„ (`src/core/strategy_management_service.py`)
- äº¤æ˜“ç­–ç•¥é–‹ç™¼å’Œç®¡ç†
- ç­–ç•¥åƒæ•¸é…ç½®
- ç­–ç•¥ç‰ˆæœ¬æ§åˆ¶

#### 3. AI æ¨¡å‹æ¨¡çµ„ (`src/core/ai_model_management_service.py`)
- æ©Ÿå™¨å­¸ç¿’æ¨¡å‹è¨“ç·´
- æ¨¡å‹æ¨ç†å’Œé æ¸¬
- æ¨¡å‹ç‰ˆæœ¬ç®¡ç†

#### 4. é¢¨éšªç®¡ç†æ¨¡çµ„ (`src/core/risk_management_service.py`)
- é¢¨éšªè©•ä¼°å’Œæ§åˆ¶
- æŠ•è³‡çµ„åˆé¢¨éšªç›£æ§
- æ­¢æå’Œæ­¢ç›ˆæ©Ÿåˆ¶

#### 5. äº¤æ˜“åŸ·è¡Œæ¨¡çµ„ (`src/core/trade_execution_service.py`)
- è¨‚å–®ç®¡ç†å’ŒåŸ·è¡Œ
- åˆ¸å•†ä»‹é¢æ•´åˆ
- äº¤æ˜“è¨˜éŒ„å’Œè¿½è¹¤

---

## ğŸ”„ é–‹ç™¼å·¥ä½œæµç¨‹

### Git Flow å·¥ä½œæµç¨‹

#### 1. åŠŸèƒ½é–‹ç™¼
```bash
# å‰µå»ºåŠŸèƒ½åˆ†æ”¯
git flow feature start new-feature

# é–‹ç™¼å’Œæäº¤
git add .
git commit -m "feat: æ–°å¢åŠŸèƒ½æè¿°"

# å®ŒæˆåŠŸèƒ½é–‹ç™¼
git flow feature finish new-feature
```

#### 2. ç™¼å¸ƒæµç¨‹
```bash
# å‰µå»ºç™¼å¸ƒåˆ†æ”¯
git flow release start v1.2.0

# æº–å‚™ç™¼å¸ƒï¼ˆæ›´æ–°ç‰ˆæœ¬è™Ÿã€æ–‡æª”ç­‰ï¼‰
git add .
git commit -m "chore: æº–å‚™ v1.2.0 ç™¼å¸ƒ"

# å®Œæˆç™¼å¸ƒ
git flow release finish v1.2.0
```

#### 3. ç†±ä¿®å¾©
```bash
# å‰µå»ºç†±ä¿®å¾©åˆ†æ”¯
git flow hotfix start critical-bug

# ä¿®å¾©å’Œæäº¤
git add .
git commit -m "fix: ä¿®å¾©é—œéµéŒ¯èª¤"

# å®Œæˆç†±ä¿®å¾©
git flow hotfix finish critical-bug
```

### æäº¤è¨Šæ¯è¦ç¯„
éµå¾ª [Conventional Commits](https://www.conventionalcommits.org/) è¦ç¯„ï¼š

```
<type>[optional scope]: <description>

[optional body]

[optional footer(s)]
```

**é¡å‹èªªæ˜**ï¼š
- `feat`: æ–°åŠŸèƒ½
- `fix`: éŒ¯èª¤ä¿®å¾©
- `docs`: æ–‡æª”æ›´æ–°
- `style`: ä»£ç¢¼æ ¼å¼èª¿æ•´
- `refactor`: ä»£ç¢¼é‡æ§‹
- `test`: æ¸¬è©¦ç›¸é—œ
- `chore`: å»ºæ§‹éç¨‹æˆ–è¼”åŠ©å·¥å…·è®Šå‹•

**ç¯„ä¾‹**ï¼š
```bash
git commit -m "feat(api): æ–°å¢ç”¨æˆ¶èªè­‰ç«¯é»"
git commit -m "fix(trading): ä¿®å¾©è¨‚å–®åŸ·è¡ŒéŒ¯èª¤"
git commit -m "docs: æ›´æ–° API ä½¿ç”¨æ‰‹å†Š"
```

---

## ğŸ“ ç·¨ç¢¼è¦ç¯„

### Python ç·¨ç¢¼è¦ç¯„

#### 1. ä»£ç¢¼é¢¨æ ¼
- éµå¾ª [PEP 8](https://pep8.org/) è¦ç¯„
- ä½¿ç”¨ [Google Style](https://google.github.io/styleguide/pyguide.html) æ–‡æª”å­—ç¬¦ä¸²
- è¡Œé•·åº¦é™åˆ¶ç‚º 88 å­—ç¬¦ï¼ˆBlack æ ¼å¼åŒ–å™¨æ¨™æº–ï¼‰

#### 2. å‘½åè¦ç¯„
```python
# è®Šæ•¸å’Œå‡½æ•¸ï¼šsnake_case
user_name = "john_doe"
def calculate_portfolio_value():
    pass

# é¡åˆ¥ï¼šPascalCase
class TradingStrategy:
    pass

# å¸¸æ•¸ï¼šUPPER_SNAKE_CASE
MAX_POSITION_SIZE = 0.1
API_BASE_URL = "https://api.example.com"

# ç§æœ‰æˆå“¡ï¼šå‰ç¶´ä¸‹åŠƒç·š
class MyClass:
    def __init__(self):
        self._private_var = None
        self.__very_private_var = None
```

#### 3. æ–‡æª”å­—ç¬¦ä¸²
```python
def calculate_sharpe_ratio(returns: List[float], risk_free_rate: float = 0.02) -> float:
    """è¨ˆç®—å¤æ™®æ¯”ç‡ã€‚

    Args:
        returns: æŠ•è³‡å›å ±ç‡åˆ—è¡¨
        risk_free_rate: ç„¡é¢¨éšªåˆ©ç‡ï¼Œé è¨­ç‚º 0.02

    Returns:
        å¤æ™®æ¯”ç‡å€¼

    Raises:
        ValueError: ç•¶å›å ±ç‡åˆ—è¡¨ç‚ºç©ºæ™‚

    Example:
        >>> returns = [0.1, 0.05, -0.02, 0.08]
        >>> sharpe = calculate_sharpe_ratio(returns)
        >>> print(f"å¤æ™®æ¯”ç‡: {sharpe:.2f}")
    """
    if not returns:
        raise ValueError("å›å ±ç‡åˆ—è¡¨ä¸èƒ½ç‚ºç©º")

    # å¯¦ç¾é‚è¼¯...
    return sharpe_ratio
```

#### 4. é¡å‹æç¤º
```python
from typing import List, Dict, Optional, Union
from datetime import datetime

def process_market_data(
    data: Dict[str, Union[int, float]],
    symbols: List[str],
    start_date: Optional[datetime] = None
) -> Dict[str, float]:
    """è™•ç†å¸‚å ´è³‡æ–™ä¸¦è¿”å›è™•ç†çµæœã€‚"""
    # å¯¦ç¾é‚è¼¯...
    return processed_data
```

#### 5. éŒ¯èª¤è™•ç†
```python
import logging
from typing import Optional

logger = logging.getLogger(__name__)

def safe_divide(a: float, b: float) -> Optional[float]:
    """å®‰å…¨é™¤æ³•é‹ç®—ã€‚"""
    try:
        if b == 0:
            logger.warning("é™¤æ•¸ç‚ºé›¶ï¼Œè¿”å› None")
            return None
        return a / b
    except Exception as e:
        logger.error(f"é™¤æ³•é‹ç®—éŒ¯èª¤: {e}")
        raise
```

### ä»£ç¢¼å“è³ªå·¥å…·

#### 1. æ ¼å¼åŒ–å·¥å…·
```bash
# Black - ä»£ç¢¼æ ¼å¼åŒ–
poetry run black src/

# isort - å°å…¥æ’åº
poetry run isort src/
```

#### 2. éœæ…‹åˆ†æ
```bash
# Pylint - ä»£ç¢¼åˆ†æ
poetry run pylint src/

# mypy - é¡å‹æª¢æŸ¥
poetry run mypy src/

# flake8 - é¢¨æ ¼æª¢æŸ¥
poetry run flake8 src/
```

#### 3. å®‰å…¨æª¢æŸ¥
```bash
# bandit - å®‰å…¨æ¼æ´æª¢æŸ¥
poetry run bandit -r src/

# safety - ä¾è³´å®‰å…¨æª¢æŸ¥
poetry run safety check
```

---

## ğŸ§ª æ¸¬è©¦æŒ‡å—

### æ¸¬è©¦æ¶æ§‹
```
tests/
â”œâ”€â”€ unit/                  # å–®å…ƒæ¸¬è©¦
â”œâ”€â”€ integration/           # æ•´åˆæ¸¬è©¦
â”œâ”€â”€ performance/           # æ•ˆèƒ½æ¸¬è©¦
â”œâ”€â”€ security/              # å®‰å…¨æ¸¬è©¦
â”œâ”€â”€ conftest.py           # pytest é…ç½®
â””â”€â”€ fixtures/             # æ¸¬è©¦æ•¸æ“š
```

### æ¸¬è©¦ç·¨å¯«è¦ç¯„

#### 1. å–®å…ƒæ¸¬è©¦
```python
import pytest
from unittest.mock import Mock, patch
from src.core.portfolio import Portfolio

class TestPortfolio:
    """æŠ•è³‡çµ„åˆæ¸¬è©¦é¡åˆ¥ã€‚"""

    def setup_method(self):
        """æ¯å€‹æ¸¬è©¦æ–¹æ³•å‰çš„è¨­ç½®ã€‚"""
        self.portfolio = Portfolio(initial_capital=100000)

    def test_add_position_success(self):
        """æ¸¬è©¦æˆåŠŸæ·»åŠ æŒå€‰ã€‚"""
        # Arrange
        symbol = "2330"
        quantity = 1000
        price = 500.0

        # Act
        result = self.portfolio.add_position(symbol, quantity, price)

        # Assert
        assert result is True
        assert symbol in self.portfolio.positions
        assert self.portfolio.positions[symbol]["quantity"] == quantity

    def test_add_position_insufficient_funds(self):
        """æ¸¬è©¦è³‡é‡‘ä¸è¶³æ™‚æ·»åŠ æŒå€‰ã€‚"""
        # Arrange
        symbol = "2330"
        quantity = 1000
        price = 1000.0  # è¶…éå¯ç”¨è³‡é‡‘

        # Act & Assert
        with pytest.raises(ValueError, match="è³‡é‡‘ä¸è¶³"):
            self.portfolio.add_position(symbol, quantity, price)

    @patch('src.core.portfolio.get_current_price')
    def test_calculate_portfolio_value(self, mock_get_price):
        """æ¸¬è©¦æŠ•è³‡çµ„åˆåƒ¹å€¼è¨ˆç®—ã€‚"""
        # Arrange
        mock_get_price.return_value = 550.0
        self.portfolio.add_position("2330", 1000, 500.0)

        # Act
        total_value = self.portfolio.calculate_total_value()

        # Assert
        expected_value = 1000 * 550.0 + self.portfolio.cash
        assert total_value == expected_value
        mock_get_price.assert_called_once_with("2330")
```

#### 2. æ•´åˆæ¸¬è©¦
```python
import pytest
from fastapi.testclient import TestClient
from src.api.main import app

class TestTradingAPI:
    """äº¤æ˜“ API æ•´åˆæ¸¬è©¦ã€‚"""

    def setup_method(self):
        """è¨­ç½®æ¸¬è©¦å®¢æˆ¶ç«¯ã€‚"""
        self.client = TestClient(app)
        self.auth_token = self._get_auth_token()

    def _get_auth_token(self) -> str:
        """ç²å–èªè­‰ Tokenã€‚"""
        response = self.client.post("/api/v1/auth/login", json={
            "username": "test_user",
            "password": "test_password"
        })
        return response.json()["data"]["access_token"]

    def test_create_strategy_success(self):
        """æ¸¬è©¦æˆåŠŸå‰µå»ºç­–ç•¥ã€‚"""
        # Arrange
        strategy_data = {
            "name": "æ¸¬è©¦ç­–ç•¥",
            "parameters": {"short_window": 5, "long_window": 20}
        }
        headers = {"Authorization": f"Bearer {self.auth_token}"}

        # Act
        response = self.client.post(
            "/api/v1/strategies",
            json=strategy_data,
            headers=headers
        )

        # Assert
        assert response.status_code == 201
        data = response.json()
        assert data["success"] is True
        assert "id" in data["data"]
```

### æ¸¬è©¦åŸ·è¡Œ

#### 1. åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦
```bash
# åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦
poetry run pytest

# åŸ·è¡Œç‰¹å®šç›®éŒ„çš„æ¸¬è©¦
poetry run pytest tests/unit/

# åŸ·è¡Œç‰¹å®šæ¸¬è©¦æ–‡ä»¶
poetry run pytest tests/unit/test_portfolio.py

# åŸ·è¡Œç‰¹å®šæ¸¬è©¦æ–¹æ³•
poetry run pytest tests/unit/test_portfolio.py::TestPortfolio::test_add_position_success
```

#### 2. æ¸¬è©¦è¦†è“‹ç‡
```bash
# ç”Ÿæˆè¦†è“‹ç‡å ±å‘Š
poetry run pytest --cov=src --cov-report=html

# æŸ¥çœ‹è¦†è“‹ç‡å ±å‘Š
open htmlcov/index.html
```

#### 3. æ•ˆèƒ½æ¸¬è©¦
```bash
# åŸ·è¡Œæ•ˆèƒ½æ¸¬è©¦
poetry run pytest tests/performance/ -v

# ç”Ÿæˆæ•ˆèƒ½å ±å‘Š
poetry run pytest tests/performance/ --benchmark-only --benchmark-html=benchmark.html
```

---

## ğŸš€ éƒ¨ç½²æµç¨‹

### é–‹ç™¼ç’°å¢ƒéƒ¨ç½²

#### 1. æœ¬åœ°é–‹ç™¼
```bash
# å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨
poetry run python -m streamlit run src/ui/web_ui.py --server.address=127.0.0.1 --server.port=8501

# å•Ÿå‹• API ä¼ºæœå™¨
poetry run uvicorn src.api.main:app --host 0.0.0.0 --port 8000 --reload
```

#### 2. Docker é–‹ç™¼ç’°å¢ƒ
```bash
# å»ºæ§‹é–‹ç™¼æ˜ åƒ
docker build -f Dockerfile.dev -t trading-system:dev .

# å•Ÿå‹•é–‹ç™¼å®¹å™¨
docker-compose -f docker-compose.dev.yml up -d
```

### æ¸¬è©¦ç’°å¢ƒéƒ¨ç½²

#### 1. è‡ªå‹•åŒ–æ¸¬è©¦
```bash
# åŸ·è¡Œå®Œæ•´æ¸¬è©¦å¥—ä»¶
poetry run pytest tests/ --cov=src --cov-report=html

# åŸ·è¡Œå®‰å…¨æ¸¬è©¦
poetry run bandit -r src/
poetry run safety check

# åŸ·è¡Œæ•ˆèƒ½æ¸¬è©¦
poetry run pytest tests/performance/ --benchmark-only
```

#### 2. æ¸¬è©¦ç’°å¢ƒé…ç½®
```yaml
# docker-compose.test.yml
version: '3.8'
services:
  app:
    build:
      context: .
      dockerfile: Dockerfile.test
    environment:
      - ENV=test
      - DATABASE_URL=postgresql://test:test@db:5432/test_db
    depends_on:
      - db
      - redis

  db:
    image: postgres:13
    environment:
      POSTGRES_DB: test_db
      POSTGRES_USER: test
      POSTGRES_PASSWORD: test
```

### ç”Ÿç”¢ç’°å¢ƒéƒ¨ç½²

#### 1. Docker ç”Ÿç”¢éƒ¨ç½²
```bash
# å»ºæ§‹ç”Ÿç”¢æ˜ åƒ
docker build -f Dockerfile -t trading-system:latest .

# å•Ÿå‹•ç”Ÿç”¢ç’°å¢ƒ
docker-compose -f docker-compose.prod.yml up -d
```

#### 2. Kubernetes éƒ¨ç½²
```yaml
# k8s/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: trading-system
spec:
  replicas: 3
  selector:
    matchLabels:
      app: trading-system
  template:
    metadata:
      labels:
        app: trading-system
    spec:
      containers:
      - name: app
        image: trading-system:latest
        ports:
        - containerPort: 8000
        env:
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              name: db-secret
              key: url
```

#### 3. CI/CD Pipeline
```yaml
# .github/workflows/deploy.yml
name: Deploy to Production

on:
  push:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Set up Python
      uses: actions/setup-python@v2
      with:
        python-version: 3.9
    - name: Install dependencies
      run: |
        pip install poetry
        poetry install
    - name: Run tests
      run: poetry run pytest

  deploy:
    needs: test
    runs-on: ubuntu-latest
    steps:
    - name: Deploy to production
      run: |
        # éƒ¨ç½²è…³æœ¬
        ./scripts/deploy.sh
```

---

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è¦‹é–‹ç™¼å•é¡Œ

#### 1. ä¾è³´å®‰è£å•é¡Œ
```bash
# å•é¡Œï¼šPoetry å®‰è£å¤±æ•—
# è§£æ±ºæ–¹æ¡ˆï¼š
curl -sSL https://install.python-poetry.org | python3 -
export PATH="$HOME/.local/bin:$PATH"

# å•é¡Œï¼šä¾è³´è¡çª
# è§£æ±ºæ–¹æ¡ˆï¼š
poetry lock --no-update
poetry install --no-cache
```

#### 2. è³‡æ–™åº«é€£æ¥å•é¡Œ
```python
# å•é¡Œï¼šè³‡æ–™åº«é€£æ¥å¤±æ•—
# è§£æ±ºæ–¹æ¡ˆï¼šæª¢æŸ¥é€£æ¥å­—ç¬¦ä¸²å’Œæ¬Šé™
import os
from sqlalchemy import create_engine

DATABASE_URL = os.getenv("DATABASE_URL", "sqlite:///./data/trading.db")
try:
    engine = create_engine(DATABASE_URL)
    connection = engine.connect()
    print("è³‡æ–™åº«é€£æ¥æˆåŠŸ")
except Exception as e:
    print(f"è³‡æ–™åº«é€£æ¥å¤±æ•—: {e}")
```

#### 3. API èªè­‰å•é¡Œ
```python
# å•é¡Œï¼šJWT Token é©—è­‰å¤±æ•—
# è§£æ±ºæ–¹æ¡ˆï¼šæª¢æŸ¥ Token æ ¼å¼å’ŒéæœŸæ™‚é–“
import jwt
from datetime import datetime

def debug_token(token: str):
    try:
        # ä¸é©—è­‰ç°½åï¼Œåƒ…è§£ç¢¼æŸ¥çœ‹å…§å®¹
        payload = jwt.decode(token, options={"verify_signature": False})
        print(f"Token å…§å®¹: {payload}")

        # æª¢æŸ¥éæœŸæ™‚é–“
        exp = payload.get('exp')
        if exp:
            exp_time = datetime.fromtimestamp(exp)
            print(f"éæœŸæ™‚é–“: {exp_time}")
            if datetime.now() > exp_time:
                print("Token å·²éæœŸ")
    except Exception as e:
        print(f"Token è§£ç¢¼å¤±æ•—: {e}")
```

### æ•ˆèƒ½å•é¡Œè¨ºæ–·

#### 1. è¨˜æ†¶é«”æ´©æ¼æª¢æ¸¬
```python
import tracemalloc
import psutil
import os

def monitor_memory():
    """ç›£æ§è¨˜æ†¶é«”ä½¿ç”¨æƒ…æ³ã€‚"""
    tracemalloc.start()

    # åŸ·è¡Œæ¥­å‹™é‚è¼¯
    # ...

    current, peak = tracemalloc.get_traced_memory()
    process = psutil.Process(os.getpid())
    memory_info = process.memory_info()

    print(f"ç•¶å‰è¨˜æ†¶é«”: {current / 1024 / 1024:.1f} MB")
    print(f"å³°å€¼è¨˜æ†¶é«”: {peak / 1024 / 1024:.1f} MB")
    print(f"ç³»çµ±è¨˜æ†¶é«”: {memory_info.rss / 1024 / 1024:.1f} MB")

    tracemalloc.stop()
```

#### 2. è³‡æ–™åº«æŸ¥è©¢å„ªåŒ–
```python
import time
from sqlalchemy import text

def profile_query(engine, query: str):
    """åˆ†ææŸ¥è©¢æ•ˆèƒ½ã€‚"""
    start_time = time.time()

    with engine.connect() as conn:
        # åŸ·è¡Œ EXPLAIN åˆ†ææŸ¥è©¢è¨ˆåŠƒ
        explain_query = f"EXPLAIN ANALYZE {query}"
        result = conn.execute(text(explain_query))

        for row in result:
            print(row)

    execution_time = time.time() - start_time
    print(f"æŸ¥è©¢åŸ·è¡Œæ™‚é–“: {execution_time:.3f} ç§’")
```

### æ—¥èªŒåˆ†æ

#### 1. çµæ§‹åŒ–æ—¥èªŒæŸ¥è©¢
```bash
# æŸ¥è©¢éŒ¯èª¤æ—¥èªŒ
grep "ERROR" logs/system/system.log | tail -20

# æŸ¥è©¢ç‰¹å®šæ™‚é–“ç¯„åœçš„æ—¥èªŒ
grep "2024-12-19 14:" logs/api/api.log

# æŸ¥è©¢ç‰¹å®šç”¨æˆ¶çš„æ“ä½œæ—¥èªŒ
grep "user_id:123" logs/audit/audit.log
```

#### 2. æ—¥èªŒèšåˆåˆ†æ
```python
import json
from collections import Counter
from datetime import datetime

def analyze_api_logs(log_file: str):
    """åˆ†æ API æ—¥èªŒã€‚"""
    status_codes = Counter()
    endpoints = Counter()
    response_times = []

    with open(log_file, 'r') as f:
        for line in f:
            try:
                log_entry = json.loads(line)
                status_codes[log_entry.get('status_code')] += 1
                endpoints[log_entry.get('endpoint')] += 1

                response_time = log_entry.get('response_time')
                if response_time:
                    response_times.append(float(response_time))
            except json.JSONDecodeError:
                continue

    print("ç‹€æ…‹ç¢¼åˆ†å¸ƒ:", dict(status_codes))
    print("ç†±é–€ç«¯é»:", dict(endpoints.most_common(10)))

    if response_times:
        avg_response_time = sum(response_times) / len(response_times)
        print(f"å¹³å‡å›æ‡‰æ™‚é–“: {avg_response_time:.3f} ç§’")
```

---

## ğŸ¤ è²¢ç»æŒ‡å—

### è²¢ç»æµç¨‹

#### 1. æº–å‚™å·¥ä½œ
```bash
# Fork å°ˆæ¡ˆåˆ°å€‹äººå¸³æˆ¶
# å…‹éš† Fork çš„å°ˆæ¡ˆ
git clone https://github.com/your-username/ai-trading-system.git
cd ai-trading-system

# æ·»åŠ ä¸Šæ¸¸å€‰åº«
git remote add upstream https://github.com/original-org/ai-trading-system.git

# å‰µå»ºé–‹ç™¼åˆ†æ”¯
git checkout -b feature/your-feature-name
```

#### 2. é–‹ç™¼è¦ç¯„
- éµå¾ªç·¨ç¢¼è¦ç¯„å’Œé¢¨æ ¼æŒ‡å—
- ç·¨å¯«å®Œæ•´çš„æ¸¬è©¦ç”¨ä¾‹
- æ›´æ–°ç›¸é—œæ–‡æª”
- ç¢ºä¿æ‰€æœ‰æ¸¬è©¦é€šé

#### 3. æäº¤ Pull Request
```bash
# æäº¤è®Šæ›´
git add .
git commit -m "feat: æ–°å¢åŠŸèƒ½æè¿°"

# æ¨é€åˆ°å€‹äººå€‰åº«
git push origin feature/your-feature-name

# åœ¨ GitHub ä¸Šå‰µå»º Pull Request
```

### Pull Request æª¢æŸ¥æ¸…å–®

#### ä»£ç¢¼å“è³ª
- [ ] ä»£ç¢¼éµå¾ªå°ˆæ¡ˆç·¨ç¢¼è¦ç¯„
- [ ] æ‰€æœ‰æ–°åŠŸèƒ½éƒ½æœ‰å°æ‡‰æ¸¬è©¦
- [ ] æ¸¬è©¦è¦†è“‹ç‡ä¸ä½æ–¼ 70%
- [ ] Pylint è©•åˆ†ä¸ä½æ–¼ 8.5/10
- [ ] æ²’æœ‰å®‰å…¨æ¼æ´

#### æ–‡æª”æ›´æ–°
- [ ] æ›´æ–° API æ–‡æª”ï¼ˆå¦‚é©ç”¨ï¼‰
- [ ] æ›´æ–°ç”¨æˆ¶æ‰‹å†Šï¼ˆå¦‚é©ç”¨ï¼‰
- [ ] æ›´æ–° CHANGELOG.md
- [ ] æ·»åŠ é©ç•¶çš„è¨»é‡‹å’Œæ–‡æª”å­—ç¬¦ä¸²

#### æ¸¬è©¦é©—è­‰
- [ ] æ‰€æœ‰å–®å…ƒæ¸¬è©¦é€šé
- [ ] æ‰€æœ‰æ•´åˆæ¸¬è©¦é€šé
- [ ] æ•ˆèƒ½æ¸¬è©¦é€šé
- [ ] å®‰å…¨æ¸¬è©¦é€šé

### ä»£ç¢¼å¯©æŸ¥æ¨™æº–

#### 1. åŠŸèƒ½æ€§
- ä»£ç¢¼æ˜¯å¦å¯¦ç¾äº†é æœŸåŠŸèƒ½
- é‚Šç•Œæ¢ä»¶æ˜¯å¦æ­£ç¢ºè™•ç†
- éŒ¯èª¤è™•ç†æ˜¯å¦å®Œå–„

#### 2. å¯è®€æ€§
- è®Šæ•¸å’Œå‡½æ•¸å‘½åæ˜¯å¦æ¸…æ™°
- ä»£ç¢¼é‚è¼¯æ˜¯å¦æ˜“æ–¼ç†è§£
- è¨»é‡‹æ˜¯å¦å……åˆ†ä¸”æº–ç¢º

#### 3. æ•ˆèƒ½
- æ˜¯å¦å­˜åœ¨æ•ˆèƒ½ç“¶é ¸
- è¨˜æ†¶é«”ä½¿ç”¨æ˜¯å¦åˆç†
- è³‡æ–™åº«æŸ¥è©¢æ˜¯å¦å„ªåŒ–

#### 4. å®‰å…¨æ€§
- æ˜¯å¦å­˜åœ¨å®‰å…¨æ¼æ´
- è¼¸å…¥é©—è­‰æ˜¯å¦å……åˆ†
- æ•æ„Ÿè³‡æ–™æ˜¯å¦æ­£ç¢ºè™•ç†

### ç™¼å¸ƒæµç¨‹

#### 1. ç‰ˆæœ¬è™Ÿè¦ç¯„
éµå¾ª [Semantic Versioning](https://semver.org/) è¦ç¯„ï¼š
- `MAJOR.MINOR.PATCH`
- `1.0.0` - ä¸»è¦ç‰ˆæœ¬ï¼ˆä¸ç›¸å®¹è®Šæ›´ï¼‰
- `1.1.0` - æ¬¡è¦ç‰ˆæœ¬ï¼ˆæ–°åŠŸèƒ½ï¼Œå‘å¾Œç›¸å®¹ï¼‰
- `1.1.1` - ä¿®è£œç‰ˆæœ¬ï¼ˆéŒ¯èª¤ä¿®å¾©ï¼‰

#### 2. ç™¼å¸ƒæª¢æŸ¥æ¸…å–®
- [ ] æ‰€æœ‰æ¸¬è©¦é€šé
- [ ] æ–‡æª”å·²æ›´æ–°
- [ ] CHANGELOG.md å·²æ›´æ–°
- [ ] ç‰ˆæœ¬è™Ÿå·²æ›´æ–°
- [ ] æ¨™ç±¤å·²å‰µå»º
- [ ] ç™¼å¸ƒèªªæ˜å·²æº–å‚™

---

## ğŸ“ æŠ€è¡“æ”¯æ´

### é–‹ç™¼è€…è³‡æº
- **æŠ€è¡“æ–‡æª”**ï¼š[docs/](docs/)
- **API æ–‡æª”**ï¼šhttp://localhost:8000/docs
- **ä»£ç¢¼å€‰åº«**ï¼šhttps://github.com/your-org/ai-trading-system
- **å•é¡Œè¿½è¹¤**ï¼šhttps://github.com/your-org/ai-trading-system/issues

### è¯ç¹«æ–¹å¼
- **é–‹ç™¼åœ˜éšŠ**ï¼šdev-team@trading-system.com
- **æŠ€è¡“æ”¯æ´**ï¼štech-support@trading-system.com
- **å®‰å…¨å•é¡Œ**ï¼šsecurity@trading-system.com

### ç¤¾ç¾¤åƒèˆ‡
- **é–‹ç™¼è€…è«–å£‡**ï¼šhttps://forum.trading-system.com/dev
- **Slack é »é“**ï¼š#development
- **æ¯é€±é–‹ç™¼æœƒè­°**ï¼šé€±ä¸‰ 14:00 (UTC+8)

---

## ğŸ“ æ–‡æª”è³‡è¨Š

**æ–‡æª”ç‰ˆæœ¬**ï¼š1.0
**æœ€å¾Œæ›´æ–°**ï¼š2024å¹´12æœˆ
**é è¨ˆé–±è®€æ™‚é–“**ï¼š60åˆ†é˜
**ç›®æ¨™ç”¨æˆ¶**ï¼šé–‹ç™¼è€…ã€æŠ€è¡“åœ˜éšŠ
**ç¶­è­·åœ˜éšŠ**ï¼šé–‹ç™¼åœ˜éšŠ
