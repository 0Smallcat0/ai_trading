# AI 股票自動交易系統 - 使用者手冊

## 目錄

- [系統概述](#系統概述)
- [安裝與設置](#安裝與設置)
- [系統功能](#系統功能)
- [使用指南](#使用指南)
- [常見問題](#常見問題)
- [故障排除](#故障排除)
- [聯絡支援](#聯絡支援)

## 系統概述

AI 股票自動交易系統是一個整合人工智能技術的自動化交易平台，能夠分析多維度市場數據，生成智能交易決策，並執行自動化交易。系統專為台灣及全球股票市場設計，適合個人投資者和專業交易團隊使用。

### 系統特色

- **多維數據分析**：整合基本面、技術面和新聞情緒數據，全方位分析市場
- **AI 驅動決策**：使用機器學習和深度學習模型，自動生成交易訊號
- **自動化交易**：支援多家券商 API，實現全自動交易執行
- **風險智能管理**：內建風險控制機制，保護投資資金安全
- **策略多元化**：提供多種預設策略，並支援自定義策略開發
- **完整回測系統**：使用歷史數據評估策略表現，優化交易參數
- **視覺化監控**：直觀的儀表板展示系統運行狀態和交易績效

## 安裝與設置

### 系統需求

- **操作系統**：Windows 10/11, macOS, Linux
- **Python 版本**：Python 3.8 或更高版本
- **記憶體**：至少 8GB RAM
- **儲存空間**：至少 10GB 可用空間
- **網路**：穩定的網路連接

### 安裝步驟

1. **克隆此倉庫**：
   ```bash
   git clone https://github.com/yourusername/ai_trading.git
   cd ai_trading
   ```

2. **安裝依賴**：
   ```bash
   # 安裝 Poetry
   pip install poetry

   # 使用 Poetry 安裝依賴
   poetry install

   # 啟動虛擬環境
   poetry shell
   ```

3. **設置環境變數**：
   ```bash
   # 複製環境變數模板
   cp .envs/.env.template .envs/.env.dev

   # 編輯 .env.dev 文件，設置必要的環境變數
   ```

4. **初始化系統**：
   ```bash
   # 初始化資料庫
   python -m src.database.schema

   # 下載初始數據
   python -m src.core.data_ingest --init
   ```

### 啟動系統

```bash
# 啟動交易系統
python -m src.core.main
```

啟動後，可以通過瀏覽器訪問系統儀表板：`http://localhost:8080`

## 系統功能

### 數據分析與處理

系統能夠自動從多個來源收集市場數據，包括：

- **股票價格數據**：開盤價、收盤價、最高價、最低價、成交量等
- **基本面數據**：財務報表、盈利預測、股息資訊等
- **技術指標**：移動平均線、相對強弱指標、MACD 等
- **市場情緒數據**：新聞情緒分析、社交媒體情緒等

系統會自動處理和清理數據，確保數據質量，並生成用於交易決策的特徵。

### 策略管理

系統支援多種交易策略類型：

- **技術分析策略**：基於技術指標的交易策略
- **基本面策略**：基於公司基本面的交易策略
- **統計套利策略**：基於統計模型的套利策略
- **機器學習策略**：基於機器學習模型的交易策略

用戶可以選擇預設策略，或者開發自定義策略。系統提供了策略回測和優化功能，幫助用戶評估和改進策略。

### 交易執行

系統能夠自動執行交易訂單，支援多種訂單類型：

- **市價單**：以當前市場價格立即執行
- **限價單**：以指定價格或更好的價格執行
- **停損單**：當價格達到指定的停損價格時執行
- **停利單**：當價格達到指定的停利價格時執行

系統整合了多家券商 API，支援實時交易執行和訂單狀態監控。

### 風險管理

系統內建風險管理功能，保護投資資金安全：

- **資金管理**：控制每筆交易的資金比例
- **部位控制**：限制單一股票的持倉比例
- **止損機制**：自動設置止損單，限制單筆交易的最大損失
- **風險評估**：計算投資組合的風險指標，如波動率、最大回撤等
- **風險預警**：當風險指標超過閾值時發出警報

### 系統監控與報告

系統提供全面的監控和報告功能：

- **系統狀態監控**：監控系統運行狀態，包括 CPU 使用率、內存使用率等
- **交易績效報告**：生成交易績效報告，包括收益率、夏普比率、最大回撤等
- **資金變化追蹤**：追蹤資金變化，生成資金曲線
- **交易日誌**：記錄所有交易活動，方便回溯和分析
- **異常通知**：當系統發生異常時，自動發送通知

## 使用指南

### 系統配置

系統使用配置文件和環境變數進行配置。主要配置項包括：

- **資料庫配置**：資料庫連接 URL、資料庫名稱等
- **API 配置**：API 金鑰、API 密鑰等
- **交易配置**：交易時間、最大持倉比例、止損比例等
- **風險配置**：風險閾值、風險控制參數等
- **通知配置**：通知方式、通知閾值等

### 數據管理

系統提供數據管理功能，用於管理市場數據：

```bash
# 更新市場數據
python -m src.core.data_ingest --update

# 查看數據狀態
python -m src.core.data_ingest --status

# 清理舊數據
python -m src.core.data_ingest --clean --older-than 90
```

### 策略管理

系統提供策略管理功能，用於管理交易策略：

```bash
# 列出所有策略
python -m src.strategy.list

# 回測策略
python -m src.core.backtest --strategy momentum --start-date 2022-01-01 --end-date 2022-12-31

# 優化策略參數
python -m src.strategy.optimize --strategy momentum --param-grid params.json
```

### 交易執行

系統提供交易執行功能，用於執行交易訂單：

```bash
# 啟動自動交易
python -m src.core.executor --auto

# 手動執行交易
python -m src.core.executor --symbol 2330.TW --action buy --quantity 1000 --price 500

# 查看訂單狀態
python -m src.core.executor --status
```

### 風險管理

系統提供風險管理功能，用於管理交易風險：

```bash
# 查看風險指標
python -m src.core.risk_control --status

# 設置風險參數
python -m src.core.risk_control --set-param max_drawdown 0.1

# 執行風險評估
python -m src.core.risk_control --evaluate
```

### 系統監控

系統提供監控功能，用於監控系統運行狀態：

```bash
# 查看系統狀態
python -m src.monitoring.status

# 生成績效報告
python -m src.monitoring.report --period monthly

# 查看交易日誌
python -m src.monitoring.logs --level info
```

## 常見問題

### 如何添加新的數據源？

系統支援添加新的數據源。請按照以下步驟添加：

1. 在 `src/data_sources/` 目錄下創建新的數據源模組
2. 實現數據擷取和轉換功能
3. 在 `src/core/data_ingest.py` 中添加對新數據源的支持

### 如何開發自定義策略？

系統支援開發自定義策略。請按照以下步驟開發：

1. 在 `src/strategy/` 目錄下創建新的策略模組
2. 繼承 `strategy.py` 中的基類
3. 實現策略邏輯
4. 在 `src/core/signal_gen.py` 中添加對新策略的支持

### 如何連接不同的券商？

系統支援連接不同的券商。請按照以下步驟連接：

1. 在 `src/integration/` 目錄下創建新的券商適配器
2. 實現訂單執行和狀態查詢功能
3. 在 `src/core/executor.py` 中添加對新券商的支持

## 故障排除

### 系統無法啟動

如果系統無法啟動，請檢查：

- 環境變數配置是否正確
- 依賴包是否安裝完整
- 資料庫連接是否正常
- 日誌文件是否有錯誤信息

### 數據更新失敗

如果數據更新失敗，請檢查：

- API 狀態是否正常
- 網絡連接是否穩定
- API 金鑰是否有效
- 請求頻率是否超過限制

### 交易執行失敗

如果交易執行失敗，請檢查：

- 券商 API 連接是否正常
- 訂單參數是否有效
- 資金是否充足
- 市場是否開放交易

## 聯絡支援

如果您遇到無法解決的問題，請聯絡我們的支援團隊：

- **電子郵件**：support@example.com
- **GitHub Issues**：[提交問題](https://github.com/yourusername/ai_trading/issues)
- **討論區**：[社區討論](https://github.com/yourusername/ai_trading/discussions)
