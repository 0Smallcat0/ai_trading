# 常見錯誤與解決方案

本文檔整理了用戶在使用 AI 股票自動交易系統時最常遇到的問題及其解決方案。

## 🚀 系統啟動問題

### 錯誤 1: 系統無法啟動
```
錯誤訊息: "ModuleNotFoundError: No module named 'streamlit'"
原因: 缺少必要的Python套件
解決方案:
1. 確認Python版本 ≥ 3.8
2. 安裝依賴套件: pip install -r requirements.txt
3. 或使用Poetry: poetry install
4. 重新啟動系統
```

### 錯誤 2: 端口被占用
```
錯誤訊息: "OSError: [Errno 48] Address already in use"
原因: 8501端口已被其他程序使用
解決方案:
1. 更換端口: streamlit run src/ui/web_ui.py --server.port=8502
2. 或終止占用程序: lsof -ti:8501 | xargs kill -9
3. 重新啟動系統
```

### 錯誤 3: 權限不足
```
錯誤訊息: "PermissionError: [Errno 13] Permission denied"
原因: 檔案或目錄權限不足
解決方案:
1. 檢查檔案權限: ls -la
2. 修改權限: chmod 755 src/ui/web_ui.py
3. 或使用管理員權限啟動
```

## 📊 數據相關問題

### 錯誤 4: 數據收集失敗
```
錯誤訊息: "ConnectionError: Failed to establish connection"
原因: 網路連接問題或數據源不可用
解決方案:
1. 檢查網路連接
2. 確認防火牆設定
3. 嘗試更換數據源
4. 稍後重試數據收集
```

### 錯誤 5: 股票代號錯誤
```
錯誤訊息: "KeyError: '股票代號不存在'"
原因: 輸入的股票代號不正確或已下市
解決方案:
1. 確認股票代號格式 (如: 2330)
2. 檢查股票是否仍在交易
3. 使用系統提供的股票清單
4. 更新股票資料庫
```

### 錯誤 6: 數據時間範圍錯誤
```
錯誤訊息: "ValueError: 開始日期不能晚於結束日期"
原因: 日期設定錯誤
解決方案:
1. 檢查日期格式 (YYYY-MM-DD)
2. 確認開始日期 < 結束日期
3. 確認日期在合理範圍內
4. 使用系統預設日期範圍
```

## 🎯 策略與回測問題

### 錯誤 7: 回測無法啟動
```
錯誤訊息: "ValueError: 回測配置驗證失敗"
原因: 回測參數設定不正確
解決方案:
1. 檢查所有必填參數
2. 確認數值範圍合理
3. 使用預設配置模板
4. 逐項檢查參數設定
```

### 錯誤 8: 策略邏輯錯誤
```
錯誤訊息: "AttributeError: 'DataFrame' object has no attribute"
原因: 策略代碼中使用了不存在的欄位
解決方案:
1. 檢查數據欄位名稱
2. 確認技術指標已正確計算
3. 使用系統提供的策略模板
4. 檢查策略邏輯語法
```

### 錯誤 9: 回測結果異常
```
問題: 回測收益率異常高 (如>1000%)
原因: 可能存在未來函數或邏輯錯誤
解決方案:
1. 檢查是否使用了未來數據
2. 確認買賣信號邏輯正確
3. 檢查交易成本設定
4. 重新驗證策略邏輯
```

## ⚠️ 風險管理問題

### 錯誤 10: 停損未觸發
```
問題: 虧損超過設定比例但停損未執行
原因: 停損機制設定錯誤或未啟用
解決方案:
1. 確認停損策略已啟用
2. 檢查停損參數設定
3. 確認風險管理模組正常運行
4. 檢查系統日誌錯誤訊息
```

### 錯誤 11: 倉位控制失效
```
問題: 實際倉位超過設定限制
原因: 倉位控制參數設定錯誤
解決方案:
1. 檢查倉位控制設定
2. 確認資金分配邏輯
3. 重新計算倉位大小
4. 啟用倉位監控警報
```

### 錯誤 12: 熔斷機制未觸發
```
問題: 虧損達到限制但系統未停止交易
原因: 熔斷機制設定錯誤或監控失效
解決方案:
1. 檢查熔斷機制設定
2. 確認監控參數正確
3. 測試熔斷功能
4. 檢查系統運行狀態
```

## 🔗 券商API問題

### 錯誤 13: API連接失敗
```
錯誤訊息: "AuthenticationError: Invalid API credentials"
原因: API金鑰錯誤或過期
解決方案:
1. 檢查API金鑰和密鑰
2. 確認API權限設定
3. 檢查IP白名單設定
4. 聯繫券商確認API狀態
```

### 錯誤 14: 訂單執行失敗
```
錯誤訊息: "OrderError: Insufficient funds"
原因: 帳戶資金不足或權限限制
解決方案:
1. 檢查帳戶資金餘額
2. 確認交易權限設定
3. 檢查股票交易狀態
4. 確認交易時間
```

### 錯誤 15: 報價數據延遲
```
問題: 即時報價更新緩慢或停止
原因: 網路延遲或API限制
解決方案:
1. 檢查網路連接品質
2. 確認API請求頻率限制
3. 重新連接API
4. 使用備用數據源
```

## 💻 系統操作問題

### 錯誤 16: 登入失敗
```
錯誤訊息: "Invalid username or password"
原因: 帳號密碼錯誤或帳戶被鎖定
解決方案:
1. 確認帳號密碼正確
2. 檢查大小寫和特殊字符
3. 嘗試重設密碼
4. 聯繫管理員解鎖帳戶
```

### 錯誤 17: 頁面載入失敗
```
錯誤訊息: "Page not found" 或空白頁面
原因: 瀏覽器快取或相容性問題
解決方案:
1. 清除瀏覽器快取
2. 嘗試無痕模式
3. 更換瀏覽器 (建議Chrome)
4. 檢查JavaScript是否啟用
```

### 錯誤 18: 功能按鈕無回應
```
問題: 點擊按鈕沒有反應
原因: JavaScript錯誤或網路問題
解決方案:
1. 重新整理頁面
2. 檢查瀏覽器控制台錯誤
3. 確認網路連接穩定
4. 嘗試重新登入
```

## 📱 介面與顯示問題

### 錯誤 19: 圖表顯示異常
```
問題: 圖表無法顯示或顯示錯誤
原因: 數據問題或瀏覽器相容性
解決方案:
1. 檢查數據完整性
2. 更新瀏覽器版本
3. 清除瀏覽器快取
4. 嘗試不同圖表類型
```

### 錯誤 20: 響應式佈局問題
```
問題: 在手機或平板上顯示異常
原因: 螢幕解析度或瀏覽器問題
解決方案:
1. 調整瀏覽器縮放比例
2. 旋轉螢幕方向
3. 使用桌面版瀏覽器
4. 更新行動瀏覽器
```

## 🔧 效能問題

### 錯誤 21: 系統運行緩慢
```
問題: 頁面載入或操作反應慢
原因: 資源不足或數據量過大
解決方案:
1. 關閉其他不必要程序
2. 增加系統記憶體
3. 減少數據查詢範圍
4. 清理系統暫存檔
```

### 錯誤 22: 記憶體不足
```
錯誤訊息: "MemoryError: Unable to allocate memory"
原因: 處理的數據量超過可用記憶體
解決方案:
1. 減少回測時間範圍
2. 降低數據頻率 (如使用日線而非分鐘線)
3. 增加系統記憶體
4. 分批處理數據
```

## 🆘 緊急情況處理

### 緊急情況 1: 系統當機
```
現象: 系統完全無回應或崩潰
立即行動:
1. 記錄當前持倉狀況
2. 使用券商官方軟體檢查帳戶
3. 必要時手動平倉
4. 聯繫技術支援

預防措施:
1. 定期備份重要設定
2. 準備備用交易方案
3. 設定自動停損機制
4. 保持緊急聯絡方式暢通
```

### 緊急情況 2: 異常交易
```
現象: 發現異常或錯誤的交易
立即行動:
1. 立即停止自動交易
2. 檢查所有未成交訂單
3. 取消可疑訂單
4. 聯繫券商確認交易狀態

後續處理:
1. 分析異常原因
2. 檢查系統日誌
3. 修復問題後再啟動
4. 加強監控機制
```

## 📞 獲取幫助

### 自助解決
1. 查看系統日誌檔案
2. 檢查 [故障排除手冊](故障排除手冊.md)
3. 參考相關教程文檔
4. 搜尋用戶社群討論

### 技術支援
```
聯絡方式:
- GitHub Issues: 提交技術問題
- 電子郵件: support@aitrading.com
- 緊急熱線: [緊急聯絡電話]
- 線上文檔: docs.aitrading.com

提供資訊:
- 錯誤訊息截圖
- 系統日誌檔案
- 操作步驟描述
- 系統環境資訊
```

### 社群支援
```
用戶社群:
- Discord 群組: [邀請連結]
- Telegram 群組: [邀請連結]
- 用戶論壇: [論壇網址]
- QQ群: [群號]
```

## 📚 預防措施

### 定期維護
1. 每週檢查系統狀態
2. 每月更新系統版本
3. 定期備份重要設定
4. 清理系統暫存檔案

### 最佳實踐
1. 從小額資金開始
2. 充分測試後再實盤
3. 設定完整風險控制
4. 保持學習和改進

---

**版本**: v1.0.0  
**更新日期**: 2025年1月13日  
**更新頻率**: 根據用戶反饋持續更新  

**變更歷史**:
- v1.0.0 (2025-01-13): 初始版本，整理常見問題和解決方案

**貢獻**: 歡迎用戶提交新的問題和解決方案，幫助改善本文檔。
