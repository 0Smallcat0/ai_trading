"""å­¸ç¿’ä¸­å¿ƒçµ„ä»¶

æ­¤æ¨¡çµ„æ•´åˆæ‰€æœ‰å­¸ç¿’ä¸­å¿ƒç›¸é—œåŠŸèƒ½ï¼Œæä¾›çµ±ä¸€çš„å­¸ç¿’ä¸­å¿ƒä»‹é¢ï¼š
- æ–°æ‰‹ä¸­å¿ƒåŠŸèƒ½
- æ–°æ‰‹æ•™å­¸åŠŸèƒ½
- çŸ¥è­˜åº«åŠŸèƒ½
- å­¸ç¿’è·¯å¾‘åŠŸèƒ½

ä¸»è¦åŠŸèƒ½ï¼š
- çµ±ä¸€çš„å­¸ç¿’ä¸­å¿ƒå…¥å£
- äº¤æ˜“åŸºç¤ŽçŸ¥è­˜ã€å…¥é–€æŒ‡å—ã€åŸºæœ¬æ¦‚å¿µä»‹ç´¹
- é€æ­¥æ•™å­¸ã€å¯¦æˆ°æ¼”ç·´ã€æ“ä½œæŒ‡å°Ž
- é€²éšŽçŸ¥è­˜ã€ç­–ç•¥è§£æžã€æŠ€è¡“æ–‡æª”
- å€‹äººåŒ–å­¸ç¿’è¨ˆåŠƒã€é€²åº¦è¿½è¹¤ã€æŠ€èƒ½è©•ä¼°
- çµ±ä¸€çš„éŒ¯èª¤è™•ç†æ©Ÿåˆ¶

Example:
    >>> from src.ui.components.learning_center import show
    >>> show()  # é¡¯ç¤ºå­¸ç¿’ä¸­å¿ƒä¸»ä»‹é¢
"""

import logging

import streamlit as st

logger = logging.getLogger(__name__)


def show() -> None:
    """é¡¯ç¤ºå­¸ç¿’ä¸­å¿ƒä¸»ä»‹é¢.

    æ•´åˆæ‰€æœ‰å­¸ç¿’ä¸­å¿ƒç›¸é—œåŠŸèƒ½åˆ°çµ±ä¸€çš„æ¨™ç±¤é ä»‹é¢ä¸­ã€‚
    æä¾›4å€‹å­åŠŸèƒ½çš„å®Œæ•´æ•´åˆï¼ŒåŒ…æ‹¬éŒ¯èª¤è™•ç†å’Œç‹€æ…‹ç®¡ç†ã€‚

    ä¸»è¦å­åŠŸèƒ½ï¼š
    - æ–°æ‰‹ä¸­å¿ƒï¼šäº¤æ˜“åŸºç¤ŽçŸ¥è­˜ã€å…¥é–€æŒ‡å—ã€åŸºæœ¬æ¦‚å¿µä»‹ç´¹
    - æ–°æ‰‹æ•™å­¸ï¼šé€æ­¥æ•™å­¸ã€å¯¦æˆ°æ¼”ç·´ã€æ“ä½œæŒ‡å°Ž
    - çŸ¥è­˜åº«ï¼šé€²éšŽçŸ¥è­˜ã€ç­–ç•¥è§£æžã€æŠ€è¡“æ–‡æª”
    - å­¸ç¿’è·¯å¾‘ï¼šå€‹äººåŒ–å­¸ç¿’è¨ˆåŠƒã€é€²åº¦è¿½è¹¤ã€æŠ€èƒ½è©•ä¼°

    Side Effects:
        - æ¸²æŸ“ Streamlit ç•Œé¢çµ„ä»¶
        - å¯èƒ½ä¿®æ”¹ st.session_state ä¸­çš„ç›¸é—œç‹€æ…‹

    Example:
        >>> show()  # é¡¯ç¤ºå®Œæ•´çš„å­¸ç¿’ä¸­å¿ƒä»‹é¢

    Note:
        æ­¤å‡½æ•¸æ•´åˆäº†å¤šå€‹åŽŸæœ‰é é¢çš„åŠŸèƒ½ï¼Œä¿æŒå‘å¾Œå…¼å®¹æ€§ã€‚
        å¦‚æžœæŸå€‹å­åŠŸèƒ½ä¸å¯ç”¨ï¼Œæœƒé¡¯ç¤ºç›¸æ‡‰çš„éŒ¯èª¤è¨Šæ¯ã€‚
    """
    try:
        st.title("ðŸ“š å­¸ç¿’ä¸­å¿ƒ")
        st.markdown("---")

        # å‰µå»ºå­åŠŸèƒ½æ¨™ç±¤é 
        tab1, tab2, tab3, tab4 = st.tabs([
            "ðŸŽ“ æ–°æ‰‹ä¸­å¿ƒ",
            "ðŸ“– æ–°æ‰‹æ•™å­¸",
            "ðŸ“š çŸ¥è­˜åº«",
            "ðŸŽ¯ å­¸ç¿’è·¯å¾‘"
        ])

        with tab1:
            _show_beginner_hub()

        with tab2:
            _show_beginner_tutorial()

        with tab3:
            _show_knowledge_base()

        with tab4:
            _show_learning_path()

    except Exception as e:
        logger.error("é¡¯ç¤ºå­¸ç¿’ä¸­å¿ƒä»‹é¢æ™‚ç™¼ç”ŸéŒ¯èª¤: %s", e, exc_info=True)
        st.error("âŒ å­¸ç¿’ä¸­å¿ƒä»‹é¢è¼‰å…¥å¤±æ•—")
        with st.expander("éŒ¯èª¤è©³æƒ…"):
            st.code(str(e))


def _show_beginner_hub() -> None:
    """é¡¯ç¤ºæ–°æ‰‹ä¸­å¿ƒåŠŸèƒ½.
    
    èª¿ç”¨åŽŸæœ‰çš„ beginner_hub é é¢åŠŸèƒ½ã€‚
    
    Returns:
        None
        
    Raises:
        Exception: ç•¶è¼‰å…¥æ–°æ‰‹ä¸­å¿ƒé é¢å¤±æ•—æ™‚
    """
    try:
        from src.ui.pages.beginner_hub import show as beginner_hub_show
        beginner_hub_show()
        
    except ImportError as e:
        logger.warning("ç„¡æ³•å°Žå…¥æ–°æ‰‹ä¸­å¿ƒé é¢: %s", e)
        st.warning("âš ï¸ æ–°æ‰‹ä¸­å¿ƒåŠŸèƒ½æš«æ™‚ä¸å¯ç”¨")
        _show_fallback_beginner_hub()
        
    except Exception as e:
        logger.error("é¡¯ç¤ºæ–°æ‰‹ä¸­å¿ƒæ™‚ç™¼ç”ŸéŒ¯èª¤: %s", e, exc_info=True)
        st.error("âŒ æ–°æ‰‹ä¸­å¿ƒåŠŸèƒ½è¼‰å…¥å¤±æ•—")
        _show_fallback_beginner_hub()


def _show_beginner_tutorial() -> None:
    """é¡¯ç¤ºæ–°æ‰‹æ•™å­¸åŠŸèƒ½.
    
    èª¿ç”¨åŽŸæœ‰çš„ beginner_tutorial é é¢åŠŸèƒ½ã€‚
    
    Returns:
        None
        
    Raises:
        Exception: ç•¶è¼‰å…¥æ–°æ‰‹æ•™å­¸é é¢å¤±æ•—æ™‚
    """
    try:
        from src.ui.pages.beginner_tutorial import show as tutorial_show
        tutorial_show()
        
    except ImportError as e:
        logger.warning("ç„¡æ³•å°Žå…¥æ–°æ‰‹æ•™å­¸é é¢: %s", e)
        st.warning("âš ï¸ æ–°æ‰‹æ•™å­¸åŠŸèƒ½æš«æ™‚ä¸å¯ç”¨")
        _show_fallback_beginner_tutorial()
        
    except Exception as e:
        logger.error("é¡¯ç¤ºæ–°æ‰‹æ•™å­¸æ™‚ç™¼ç”ŸéŒ¯èª¤: %s", e, exc_info=True)
        st.error("âŒ æ–°æ‰‹æ•™å­¸åŠŸèƒ½è¼‰å…¥å¤±æ•—")
        _show_fallback_beginner_tutorial()


def _show_knowledge_base() -> None:
    """é¡¯ç¤ºçŸ¥è­˜åº«åŠŸèƒ½.
    
    èª¿ç”¨åŽŸæœ‰çš„ knowledge_base é é¢åŠŸèƒ½ã€‚
    
    Returns:
        None
        
    Raises:
        Exception: ç•¶è¼‰å…¥çŸ¥è­˜åº«é é¢å¤±æ•—æ™‚
    """
    try:
        from src.ui.pages.knowledge_base import show as knowledge_show
        knowledge_show()
        
    except ImportError as e:
        logger.warning("ç„¡æ³•å°Žå…¥çŸ¥è­˜åº«é é¢: %s", e)
        st.warning("âš ï¸ çŸ¥è­˜åº«åŠŸèƒ½æš«æ™‚ä¸å¯ç”¨")
        _show_fallback_knowledge_base()
        
    except Exception as e:
        logger.error("é¡¯ç¤ºçŸ¥è­˜åº«æ™‚ç™¼ç”ŸéŒ¯èª¤: %s", e, exc_info=True)
        st.error("âŒ çŸ¥è­˜åº«åŠŸèƒ½è¼‰å…¥å¤±æ•—")
        _show_fallback_knowledge_base()


def _show_learning_path() -> None:
    """é¡¯ç¤ºå­¸ç¿’è·¯å¾‘åŠŸèƒ½.

    æä¾›å€‹äººåŒ–å­¸ç¿’è¨ˆåŠƒã€é€²åº¦è¿½è¹¤ã€æŠ€èƒ½è©•ä¼°ç­‰åŠŸèƒ½ã€‚

    Raises:
        Exception: ç•¶è¼‰å…¥å­¸ç¿’è·¯å¾‘åŠŸèƒ½å¤±æ•—æ™‚
    """
    try:
        # å˜—è©¦è¼‰å…¥å°ˆé–€çš„å­¸ç¿’è·¯å¾‘é é¢
        from src.ui.pages.learning_path import show as learning_path_show
        learning_path_show()

    except ImportError as e:
        logger.warning("ç„¡æ³•å°Žå…¥å­¸ç¿’è·¯å¾‘é é¢: %s", e)
        st.warning("âš ï¸ å­¸ç¿’è·¯å¾‘åŠŸèƒ½æš«æ™‚ä¸å¯ç”¨")
        _show_fallback_learning_path()

    except Exception as e:
        logger.error("é¡¯ç¤ºå­¸ç¿’è·¯å¾‘æ™‚ç™¼ç”ŸéŒ¯èª¤: %s", e, exc_info=True)
        st.error("âŒ å­¸ç¿’è·¯å¾‘åŠŸèƒ½è¼‰å…¥å¤±æ•—")
        _show_fallback_learning_path()


# å‚™ç”¨é¡¯ç¤ºå‡½æ•¸
def _show_fallback_beginner_hub() -> None:
    """æ–°æ‰‹ä¸­å¿ƒçš„å‚™ç”¨é¡¯ç¤ºå‡½æ•¸.

    ç•¶åŽŸæœ‰çš„æ–°æ‰‹ä¸­å¿ƒé é¢ç„¡æ³•è¼‰å…¥æ™‚ï¼Œé¡¯ç¤ºåŸºæœ¬çš„åŠŸèƒ½èªªæ˜Žã€‚
    """
    st.info("ðŸŽ“ æ–°æ‰‹ä¸­å¿ƒåŠŸèƒ½æ­£åœ¨è¼‰å…¥ä¸­...")

    st.markdown("""
    **æ–°æ‰‹ä¸­å¿ƒ** ç‚ºæ–°ç”¨æˆ¶æä¾›å®Œæ•´çš„å…¥é–€æŒ‡å°Žï¼ŒåŒ…æ‹¬ï¼š
    - ðŸ“ˆ **äº¤æ˜“åŸºç¤ŽçŸ¥è­˜**: è‚¡ç¥¨ã€æœŸè²¨ã€å¤–åŒ¯ç­‰åŸºæœ¬æ¦‚å¿µ
    - ðŸ“‹ **å…¥é–€æŒ‡å—**: ç³»çµ±æ“ä½œå’ŒåŠŸèƒ½ä»‹ç´¹
    - ðŸ’¡ **åŸºæœ¬æ¦‚å¿µä»‹ç´¹**: æŠ€è¡“åˆ†æžã€åŸºæœ¬é¢åˆ†æžç­‰æ ¸å¿ƒæ¦‚å¿µ
    """)

    # äº¤æ˜“åŸºç¤ŽçŸ¥è­˜
    st.markdown("### ðŸ“ˆ äº¤æ˜“åŸºç¤ŽçŸ¥è­˜")

    knowledge_topics = [
        {"ä¸»é¡Œ": "è‚¡ç¥¨äº¤æ˜“åŸºç¤Ž", "å…§å®¹": "è‚¡ç¥¨å¸‚å ´é‹ä½œåŽŸç†ã€äº¤æ˜“æ™‚é–“ã€è¨‚å–®é¡žåž‹", "é›£åº¦": "åˆç´š"},
        {"ä¸»é¡Œ": "æŠ€è¡“åˆ†æžå…¥é–€", "å…§å®¹": "Kç·šåœ–ã€ç§»å‹•å¹³å‡ç·šã€æ”¯æ’é˜»åŠ›ä½", "é›£åº¦": "åˆç´š"},
        {"ä¸»é¡Œ": "åŸºæœ¬é¢åˆ†æž", "å…§å®¹": "è²¡å‹™å ±è¡¨åˆ†æžã€ä¼°å€¼æ–¹æ³•ã€è¡Œæ¥­åˆ†æž", "é›£åº¦": "ä¸­ç´š"},
        {"ä¸»é¡Œ": "é¢¨éšªç®¡ç†", "å…§å®¹": "åœæåœåˆ©ã€éƒ¨ä½æŽ§åˆ¶ã€è³‡é‡‘ç®¡ç†", "é›£åº¦": "ä¸­ç´š"}
    ]

    for topic in knowledge_topics:
        with st.expander(f"{topic['ä¸»é¡Œ']} - {topic['é›£åº¦']}"):
            st.write(f"**å…§å®¹**: {topic['å…§å®¹']}")
            col1, col2 = st.columns(2)
            with col1:
                if st.button("é–‹å§‹å­¸ç¿’", key=f"learn_{topic['ä¸»é¡Œ']}"):
                    st.info(f"{topic['ä¸»é¡Œ']} å­¸ç¿’åŠŸèƒ½é–‹ç™¼ä¸­...")
            with col2:
                if st.button("æŸ¥çœ‹ç¯„ä¾‹", key=f"example_{topic['ä¸»é¡Œ']}"):
                    st.info(f"{topic['ä¸»é¡Œ']} ç¯„ä¾‹åŠŸèƒ½é–‹ç™¼ä¸­...")

    # å…¥é–€æŒ‡å—
    st.markdown("### ðŸ“‹ å…¥é–€æŒ‡å—")

    guide_steps = [
        {"æ­¥é©Ÿ": "1", "æ¨™é¡Œ": "ç³»çµ±è¨»å†Š", "æè¿°": "å‰µå»ºæ‚¨çš„äº¤æ˜“ç³»çµ±å¸³æˆ¶", "ç‹€æ…‹": "âœ… å·²å®Œæˆ"},
        {"æ­¥é©Ÿ": "2", "æ¨™é¡Œ": "åŸºæœ¬è¨­å®š", "æè¿°": "é…ç½®åŸºæœ¬çš„äº¤æ˜“åƒæ•¸å’Œåå¥½", "ç‹€æ…‹": "ðŸ”„ é€²è¡Œä¸­"},
        {"æ­¥é©Ÿ": "3", "æ¨™é¡Œ": "æ¨¡æ“¬äº¤æ˜“", "æè¿°": "ä½¿ç”¨æ¨¡æ“¬è³‡é‡‘é€²è¡Œäº¤æ˜“ç·´ç¿’", "ç‹€æ…‹": "â³ å¾…é–‹å§‹"},
        {"æ­¥é©Ÿ": "4", "æ¨™é¡Œ": "ç­–ç•¥å­¸ç¿’", "æè¿°": "å­¸ç¿’åŸºæœ¬çš„äº¤æ˜“ç­–ç•¥å’Œåˆ†æžæ–¹æ³•", "ç‹€æ…‹": "â³ å¾…é–‹å§‹"}
    ]

    for step in guide_steps:
        with st.expander(f"æ­¥é©Ÿ {step['æ­¥é©Ÿ']}: {step['æ¨™é¡Œ']} - {step['ç‹€æ…‹']}"):
            st.write(f"**æè¿°**: {step['æè¿°']}")
            if step['ç‹€æ…‹'] == "ðŸ”„ é€²è¡Œä¸­":
                if st.button(f"ç¹¼çºŒæ­¥é©Ÿ {step['æ­¥é©Ÿ']}", key=f"continue_{step['æ­¥é©Ÿ']}"):
                    st.info(f"æ­¥é©Ÿ {step['æ­¥é©Ÿ']} åŠŸèƒ½é–‹ç™¼ä¸­...")

    # åŸºæœ¬æ¦‚å¿µä»‹ç´¹
    st.markdown("### ðŸ’¡ åŸºæœ¬æ¦‚å¿µä»‹ç´¹")

    concepts = [
        {"æ¦‚å¿µ": "å¤šé ­èˆ‡ç©ºé ­", "èªªæ˜Ž": "çœ‹æ¼²(å¤šé ­)èˆ‡çœ‹è·Œ(ç©ºé ­)çš„å¸‚å ´è§€é»ž"},
        {"æ¦‚å¿µ": "è²·å…¥èˆ‡è³£å‡º", "èªªæ˜Ž": "é–‹å€‰èˆ‡å¹³å€‰çš„åŸºæœ¬æ“ä½œ"},
        {"æ¦‚å¿µ": "æ­¢æèˆ‡æ­¢ç›ˆ", "èªªæ˜Ž": "é¢¨éšªæŽ§åˆ¶çš„é‡è¦å·¥å…·"},
        {"æ¦‚å¿µ": "æ§“æ¡¿äº¤æ˜“", "èªªæ˜Ž": "æ”¾å¤§æ”¶ç›Šèˆ‡é¢¨éšªçš„äº¤æ˜“æ–¹å¼"}
    ]

    for concept in concepts:
        col1, col2 = st.columns([1, 3])
        with col1:
            st.write(f"**{concept['æ¦‚å¿µ']}**")
        with col2:
            st.write(concept['èªªæ˜Ž'])


def _show_fallback_beginner_tutorial() -> None:
    """æ–°æ‰‹æ•™å­¸çš„å‚™ç”¨é¡¯ç¤ºå‡½æ•¸.

    ç•¶åŽŸæœ‰çš„æ–°æ‰‹æ•™å­¸é é¢ç„¡æ³•è¼‰å…¥æ™‚ï¼Œé¡¯ç¤ºåŸºæœ¬çš„åŠŸèƒ½èªªæ˜Žã€‚
    """
    st.info("ðŸ“– æ–°æ‰‹æ•™å­¸åŠŸèƒ½æ­£åœ¨è¼‰å…¥ä¸­...")

    st.markdown("""
    **æ–°æ‰‹æ•™å­¸** æä¾›å®Œæ•´çš„é€æ­¥æ•™å­¸åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š
    - ðŸ“š **é€æ­¥æ•™å­¸**: å¾žåŸºç¤Žåˆ°é€²éšŽçš„ç³»çµ±åŒ–æ•™å­¸
    - ðŸŽ¯ **å¯¦æˆ°æ¼”ç·´**: æ¨¡æ“¬äº¤æ˜“å’Œç­–ç•¥å¯¦ä½œ
    - ðŸ“Š **æ“ä½œæŒ‡å°Ž**: è©³ç´°çš„ç³»çµ±æ“ä½œèªªæ˜Ž
    """)

    # é€æ­¥æ•™å­¸
    st.markdown("### ðŸ“š é€æ­¥æ•™å­¸")

    tutorials = [
        {"èª²ç¨‹": "ç¬¬ä¸€èª²ï¼šèªè­˜äº¤æ˜“ä»‹é¢", "æ™‚é•·": "15åˆ†é˜", "ç‹€æ…‹": "âœ… å·²å®Œæˆ", "é€²åº¦": 100},
        {"èª²ç¨‹": "ç¬¬äºŒèª²ï¼šä¸‹å–®æ“ä½œæ•™å­¸", "æ™‚é•·": "20åˆ†é˜", "ç‹€æ…‹": "ðŸ”„ é€²è¡Œä¸­", "é€²åº¦": 60},
        {"èª²ç¨‹": "ç¬¬ä¸‰èª²ï¼šæŠ€è¡“åˆ†æžåŸºç¤Ž", "æ™‚é•·": "30åˆ†é˜", "ç‹€æ…‹": "â³ æœªé–‹å§‹", "é€²åº¦": 0},
        {"èª²ç¨‹": "ç¬¬å››èª²ï¼šé¢¨éšªç®¡ç†å¯¦å‹™", "æ™‚é•·": "25åˆ†é˜", "ç‹€æ…‹": "â³ æœªé–‹å§‹", "é€²åº¦": 0}
    ]

    for tutorial in tutorials:
        with st.expander(f"{tutorial['èª²ç¨‹']} - {tutorial['ç‹€æ…‹']}"):
            col1, col2 = st.columns(2)
            with col1:
                st.write(f"**æ™‚é•·**: {tutorial['æ™‚é•·']}")
                st.progress(tutorial['é€²åº¦'] / 100)
                st.write(f"é€²åº¦: {tutorial['é€²åº¦']}%")
            with col2:
                if tutorial['ç‹€æ…‹'] == "ðŸ”„ é€²è¡Œä¸­":
                    if st.button("ç¹¼çºŒå­¸ç¿’", key=f"continue_{tutorial['èª²ç¨‹']}"):
                        st.info(f"{tutorial['èª²ç¨‹']} ç¹¼çºŒå­¸ç¿’åŠŸèƒ½é–‹ç™¼ä¸­...")
                elif tutorial['ç‹€æ…‹'] == "â³ æœªé–‹å§‹":
                    if st.button("é–‹å§‹å­¸ç¿’", key=f"start_{tutorial['èª²ç¨‹']}"):
                        st.info(f"{tutorial['èª²ç¨‹']} é–‹å§‹å­¸ç¿’åŠŸèƒ½é–‹ç™¼ä¸­...")

    # å¯¦æˆ°æ¼”ç·´
    st.markdown("### ðŸŽ¯ å¯¦æˆ°æ¼”ç·´")

    practice_sessions = [
        {"æ¼”ç·´": "æ¨¡æ“¬ä¸‹å–®ç·´ç¿’", "é¡žåž‹": "åŸºç¤Žæ“ä½œ", "å®Œæˆåº¦": "100%"},
        {"æ¼”ç·´": "æŠ€è¡“æŒ‡æ¨™æ‡‰ç”¨", "é¡žåž‹": "åˆ†æžæŠ€å·§", "å®Œæˆåº¦": "75%"},
        {"æ¼”ç·´": "ç­–ç•¥å›žæ¸¬å¯¦ä½œ", "é¡žåž‹": "é€²éšŽæ‡‰ç”¨", "å®Œæˆåº¦": "0%"}
    ]

    for session in practice_sessions:
        col1, col2, col3, col4 = st.columns(4)
        with col1:
            st.write(f"**{session['æ¼”ç·´']}**")
        with col2:
            st.write(f"é¡žåž‹: {session['é¡žåž‹']}")
        with col3:
            st.write(f"å®Œæˆ: {session['å®Œæˆåº¦']}")
        with col4:
            if st.button("é–‹å§‹æ¼”ç·´", key=f"practice_{session['æ¼”ç·´']}"):
                st.info(f"{session['æ¼”ç·´']} åŠŸèƒ½é–‹ç™¼ä¸­...")


def _show_fallback_knowledge_base() -> None:
    """çŸ¥è­˜åº«çš„å‚™ç”¨é¡¯ç¤ºå‡½æ•¸.

    ç•¶åŽŸæœ‰çš„çŸ¥è­˜åº«é é¢ç„¡æ³•è¼‰å…¥æ™‚ï¼Œé¡¯ç¤ºåŸºæœ¬çš„åŠŸèƒ½èªªæ˜Žã€‚
    """
    st.info("ðŸ“š çŸ¥è­˜åº«åŠŸèƒ½æ­£åœ¨è¼‰å…¥ä¸­...")

    st.markdown("""
    **çŸ¥è­˜åº«** æä¾›å®Œæ•´çš„é€²éšŽå­¸ç¿’è³‡æºï¼ŒåŒ…æ‹¬ï¼š
    - ðŸŽ“ **é€²éšŽçŸ¥è­˜**: æ·±å…¥çš„äº¤æ˜“ç†è«–å’Œå¯¦å‹™çŸ¥è­˜
    - ðŸ“ˆ **ç­–ç•¥è§£æž**: å„ç¨®äº¤æ˜“ç­–ç•¥çš„è©³ç´°åˆ†æž
    - ðŸ“– **æŠ€è¡“æ–‡æª”**: ç³»çµ±åŠŸèƒ½å’ŒAPIçš„å®Œæ•´æ–‡æª”
    """)

    # é€²éšŽçŸ¥è­˜
    st.markdown("### ðŸŽ“ é€²éšŽçŸ¥è­˜")

    advanced_topics = [
        {"ä¸»é¡Œ": "é‡åŒ–äº¤æ˜“ç­–ç•¥", "åˆ†é¡ž": "ç­–ç•¥é–‹ç™¼", "é›£åº¦": "é«˜ç´š", "æ–‡ç« æ•¸": "15"},
        {"ä¸»é¡Œ": "æ©Ÿå™¨å­¸ç¿’æ‡‰ç”¨", "åˆ†é¡ž": "AIæŠ€è¡“", "é›£åº¦": "é«˜ç´š", "æ–‡ç« æ•¸": "12"},
        {"ä¸»é¡Œ": "é¢¨éšªæ¨¡åž‹å»ºæ§‹", "åˆ†é¡ž": "é¢¨éšªç®¡ç†", "é›£åº¦": "ä¸­é«˜ç´š", "æ–‡ç« æ•¸": "8"},
        {"ä¸»é¡Œ": "å¸‚å ´å¾®è§€çµæ§‹", "åˆ†é¡ž": "å¸‚å ´ç†è«–", "é›£åº¦": "é«˜ç´š", "æ–‡ç« æ•¸": "10"}
    ]

    for topic in advanced_topics:
        with st.expander(f"{topic['ä¸»é¡Œ']} - {topic['é›£åº¦']} ({topic['æ–‡ç« æ•¸']}ç¯‡æ–‡ç« )"):
            st.write(f"**åˆ†é¡ž**: {topic['åˆ†é¡ž']}")
            st.write(f"**é›£åº¦**: {topic['é›£åº¦']}")
            col1, col2 = st.columns(2)
            with col1:
                if st.button("ç€è¦½æ–‡ç« ", key=f"browse_{topic['ä¸»é¡Œ']}"):
                    st.info(f"{topic['ä¸»é¡Œ']} æ–‡ç« ç€è¦½åŠŸèƒ½é–‹ç™¼ä¸­...")
            with col2:
                if st.button("æ”¶è—ä¸»é¡Œ", key=f"bookmark_{topic['ä¸»é¡Œ']}"):
                    st.success(f"{topic['ä¸»é¡Œ']} å·²åŠ å…¥æ”¶è—")

    # ç­–ç•¥è§£æž
    st.markdown("### ðŸ“ˆ ç­–ç•¥è§£æž")

    strategies = [
        {"ç­–ç•¥": "å‹•é‡ç­–ç•¥", "æ”¶ç›ŠçŽ‡": "+15.2%", "å¤æ™®æ¯”çŽ‡": "1.35", "æœ€å¤§å›žæ’¤": "-8.5%"},
        {"ç­–ç•¥": "å‡å€¼å›žæ­¸", "æ”¶ç›ŠçŽ‡": "+12.8%", "å¤æ™®æ¯”çŽ‡": "1.28", "æœ€å¤§å›žæ’¤": "-6.2%"},
        {"ç­–ç•¥": "é…å°äº¤æ˜“", "æ”¶ç›ŠçŽ‡": "+9.5%", "å¤æ™®æ¯”çŽ‡": "1.45", "æœ€å¤§å›žæ’¤": "-4.1%"},
        {"ç­–ç•¥": "ç¶²æ ¼äº¤æ˜“", "æ”¶ç›ŠçŽ‡": "+11.3%", "å¤æ™®æ¯”çŽ‡": "1.12", "æœ€å¤§å›žæ’¤": "-7.8%"}
    ]

    for strategy in strategies:
        col1, col2, col3, col4, col5 = st.columns(5)
        with col1:
            st.write(f"**{strategy['ç­–ç•¥']}**")
        with col2:
            st.write(f"æ”¶ç›Š: {strategy['æ”¶ç›ŠçŽ‡']}")
        with col3:
            st.write(f"å¤æ™®: {strategy['å¤æ™®æ¯”çŽ‡']}")
        with col4:
            st.write(f"å›žæ’¤: {strategy['æœ€å¤§å›žæ’¤']}")
        with col5:
            if st.button("è©³ç´°è§£æž", key=f"analyze_{strategy['ç­–ç•¥']}"):
                st.info(f"{strategy['ç­–ç•¥']} è©³ç´°è§£æžåŠŸèƒ½é–‹ç™¼ä¸­...")

    # æŠ€è¡“æ–‡æª”
    st.markdown("### ðŸ“– æŠ€è¡“æ–‡æª”")

    doc_categories = st.multiselect("é¸æ“‡æ–‡æª”é¡žåˆ¥", [
        "APIæ–‡æª”",
        "ç³»çµ±æž¶æ§‹",
        "é–‹ç™¼æŒ‡å—",
        "éƒ¨ç½²èªªæ˜Ž"
    ], default=["APIæ–‡æª”"])

    if "APIæ–‡æª”" in doc_categories:
        st.markdown("**APIæ–‡æª”**")
        st.write("- REST API åƒè€ƒ")
        st.write("- WebSocket API èªªæ˜Ž")
        st.write("- èªè­‰èˆ‡æŽˆæ¬Š")

    if st.button("ðŸ“„ ç”Ÿæˆæ–‡æª”", type="primary"):
        st.success("âœ… æŠ€è¡“æ–‡æª”å·²ç”Ÿæˆ")


def _show_fallback_learning_path() -> None:
    """å­¸ç¿’è·¯å¾‘çš„å‚™ç”¨é¡¯ç¤ºå‡½æ•¸.

    ç•¶åŽŸæœ‰çš„å­¸ç¿’è·¯å¾‘é é¢ç„¡æ³•è¼‰å…¥æ™‚ï¼Œé¡¯ç¤ºåŸºæœ¬çš„åŠŸèƒ½èªªæ˜Žã€‚
    """
    st.info("ðŸŽ¯ å­¸ç¿’è·¯å¾‘åŠŸèƒ½æ­£åœ¨è¼‰å…¥ä¸­...")

    st.markdown("""
    **å­¸ç¿’è·¯å¾‘** æä¾›å€‹äººåŒ–çš„å­¸ç¿’ç®¡ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š
    - ðŸ“‹ **å€‹äººåŒ–å­¸ç¿’è¨ˆåŠƒ**: æ ¹æ“šå€‹äººéœ€æ±‚åˆ¶å®šå­¸ç¿’è¨ˆåŠƒ
    - ðŸ“Š **é€²åº¦è¿½è¹¤**: è©³ç´°çš„å­¸ç¿’é€²åº¦ç›£æŽ§å’Œçµ±è¨ˆ
    - ðŸŽ¯ **æŠ€èƒ½è©•ä¼°**: å®šæœŸçš„æŠ€èƒ½æ¸¬è©¦å’Œèƒ½åŠ›è©•ä¼°
    """)

    # å€‹äººåŒ–å­¸ç¿’è¨ˆåŠƒ
    st.markdown("### ðŸ“‹ å€‹äººåŒ–å­¸ç¿’è¨ˆåŠƒ")

    user_level = st.selectbox("é¸æ“‡æ‚¨çš„äº¤æ˜“ç¶“é©—", [
        "å®Œå…¨æ–°æ‰‹",
        "æœ‰åŸºç¤Žç¶“é©—",
        "ä¸­ç´šäº¤æ˜“è€…",
        "é«˜ç´šäº¤æ˜“è€…"
    ])

    learning_goals = st.multiselect("é¸æ“‡å­¸ç¿’ç›®æ¨™", [
        "æŽŒæ¡åŸºæœ¬äº¤æ˜“æ“ä½œ",
        "å­¸ç¿’æŠ€è¡“åˆ†æž",
        "é–‹ç™¼é‡åŒ–ç­–ç•¥",
        "é¢¨éšªç®¡ç†é€²éšŽ",
        "æ©Ÿå™¨å­¸ç¿’æ‡‰ç”¨"
    ])

    if st.button("ðŸŽ¯ ç”Ÿæˆå­¸ç¿’è¨ˆåŠƒ", type="primary"):
        st.success("âœ… å€‹äººåŒ–å­¸ç¿’è¨ˆåŠƒå·²ç”Ÿæˆ")
        st.info(f"ç¶“é©—ç­‰ç´š: {user_level}")
        st.info(f"å­¸ç¿’ç›®æ¨™: {', '.join(learning_goals)}")

    # é€²åº¦è¿½è¹¤
    st.markdown("### ðŸ“Š é€²åº¦è¿½è¹¤")

    progress_data = [
        {"æ¨¡çµ„": "äº¤æ˜“åŸºç¤Ž", "å®Œæˆåº¦": 100, "èŠ±è²»æ™‚é–“": "5å°æ™‚", "æœ€å¾Œå­¸ç¿’": "æ˜¨å¤©"},
        {"æ¨¡çµ„": "æŠ€è¡“åˆ†æž", "å®Œæˆåº¦": 75, "èŠ±è²»æ™‚é–“": "8å°æ™‚", "æœ€å¾Œå­¸ç¿’": "ä»Šå¤©"},
        {"æ¨¡çµ„": "ç­–ç•¥é–‹ç™¼", "å®Œæˆåº¦": 30, "èŠ±è²»æ™‚é–“": "3å°æ™‚", "æœ€å¾Œå­¸ç¿’": "3å¤©å‰"},
        {"æ¨¡çµ„": "é¢¨éšªç®¡ç†", "å®Œæˆåº¦": 0, "èŠ±è²»æ™‚é–“": "0å°æ™‚", "æœ€å¾Œå­¸ç¿’": "æœªé–‹å§‹"}
    ]

    for module in progress_data:
        with st.expander(f"{module['æ¨¡çµ„']} - {module['å®Œæˆåº¦']}%"):
            col1, col2 = st.columns(2)
            with col1:
                st.progress(module['å®Œæˆåº¦'] / 100)
                st.write(f"å®Œæˆåº¦: {module['å®Œæˆåº¦']}%")
            with col2:
                st.write(f"èŠ±è²»æ™‚é–“: {module['èŠ±è²»æ™‚é–“']}")
                st.write(f"æœ€å¾Œå­¸ç¿’: {module['æœ€å¾Œå­¸ç¿’']}")

    # æŠ€èƒ½è©•ä¼°
    st.markdown("### ðŸŽ¯ æŠ€èƒ½è©•ä¼°")

    skill_areas = [
        {"æŠ€èƒ½": "åŸºç¤Žäº¤æ˜“çŸ¥è­˜", "ç•¶å‰ç­‰ç´š": "ç†Ÿç·´", "è©•ä¼°åˆ†æ•¸": "85/100", "å»ºè­°": "å¯é€²å…¥ä¸­ç´šèª²ç¨‹"},
        {"æŠ€èƒ½": "æŠ€è¡“åˆ†æžèƒ½åŠ›", "ç•¶å‰ç­‰ç´š": "ä¸­ç´š", "è©•ä¼°åˆ†æ•¸": "72/100", "å»ºè­°": "åŠ å¼·åœ–è¡¨åˆ†æžç·´ç¿’"},
        {"æŠ€èƒ½": "é¢¨éšªæŽ§åˆ¶", "ç•¶å‰ç­‰ç´š": "åˆç´š", "è©•ä¼°åˆ†æ•¸": "58/100", "å»ºè­°": "éœ€è¦æ›´å¤šå¯¦æˆ°ç·´ç¿’"},
        {"æŠ€èƒ½": "ç­–ç•¥é–‹ç™¼", "ç•¶å‰ç­‰ç´š": "æ–°æ‰‹", "è©•ä¼°åˆ†æ•¸": "35/100", "å»ºè­°": "å»ºè­°å…ˆå®ŒæˆåŸºç¤Žèª²ç¨‹"}
    ]

    for skill in skill_areas:
        col1, col2, col3, col4 = st.columns(4)
        with col1:
            st.write(f"**{skill['æŠ€èƒ½']}**")
        with col2:
            st.write(f"ç­‰ç´š: {skill['ç•¶å‰ç­‰ç´š']}")
        with col3:
            st.write(f"åˆ†æ•¸: {skill['è©•ä¼°åˆ†æ•¸']}")
        with col4:
            st.write(f"å»ºè­°: {skill['å»ºè­°']}")

    if st.button("ðŸŽ¯ é–‹å§‹æŠ€èƒ½æ¸¬è©¦", use_container_width=True):
        st.success("âœ… æŠ€èƒ½æ¸¬è©¦å·²é–‹å§‹")
        st.info("æ¸¬è©¦å°‡åŒ…å«é¸æ“‡é¡Œã€å¯¦ä½œé¡Œå’Œæ¡ˆä¾‹åˆ†æž")


# è¼”åŠ©å‡½æ•¸
def get_learning_progress() -> dict:
    """ç²å–å­¸ç¿’é€²åº¦ä¿¡æ¯.

    Returns:
        dict: åŒ…å«å­¸ç¿’é€²åº¦çš„å­—å…¸

    Example:
        >>> progress = get_learning_progress()
        >>> print(progress['completed_courses'])
        5
    """
    return {
        'completed_courses': 5,
        'total_courses': 20,
        'current_level': 'ä¸­ç´š',
        'study_hours': 25,
        'skill_scores': {
            'åŸºç¤Žäº¤æ˜“çŸ¥è­˜': 85,
            'æŠ€è¡“åˆ†æžèƒ½åŠ›': 72,
            'é¢¨éšªæŽ§åˆ¶': 58,
            'ç­–ç•¥é–‹ç™¼': 35
        }
    }


def get_tutorial_status() -> dict:
    """ç²å–æ•™å­¸ç‹€æ…‹ä¿¡æ¯.

    Returns:
        dict: åŒ…å«æ•™å­¸ç‹€æ…‹çš„å­—å…¸

    Example:
        >>> status = get_tutorial_status()
        >>> print(status['active_tutorials'])
        3
    """
    return {
        'active_tutorials': 3,
        'completed_tutorials': 8,
        'total_practice_sessions': 15,
        'average_score': 78.5
    }


def validate_learning_config(config: dict) -> bool:
    """é©—è­‰å­¸ç¿’é…ç½®.

    Args:
        config: å­¸ç¿’é…ç½®å­—å…¸

    Returns:
        bool: é…ç½®æ˜¯å¦æœ‰æ•ˆ

    Example:
        >>> config = {'level': 'å®Œå…¨æ–°æ‰‹', 'goals': ['æŽŒæ¡åŸºæœ¬äº¤æ˜“æ“ä½œ'], 'time': 10}
        >>> is_valid = validate_learning_config(config)
        >>> print(is_valid)
        True
    """
    required_fields = ['level', 'goals', 'time']
    if not all(field in config for field in required_fields):
        return False

    valid_levels = ['å®Œå…¨æ–°æ‰‹', 'æœ‰åŸºç¤Žç¶“é©—', 'ä¸­ç´šäº¤æ˜“è€…', 'é«˜ç´šäº¤æ˜“è€…']
    if config.get('level') not in valid_levels:
        return False

    if not isinstance(config.get('goals'), list) or len(config.get('goals', [])) == 0:
        return False

    if not isinstance(config.get('time'), (int, float)) or config.get('time', 0) <= 0:
        return False

    return True


def validate_skill_assessment(assessment: dict) -> bool:
    """é©—è­‰æŠ€èƒ½è©•ä¼°é…ç½®.

    Args:
        assessment: æŠ€èƒ½è©•ä¼°é…ç½®å­—å…¸

    Returns:
        bool: é…ç½®æ˜¯å¦æœ‰æ•ˆ

    Example:
        >>> assessment = {'skill': 'åŸºç¤Žäº¤æ˜“çŸ¥è­˜', 'score': 85, 'level': 'ç†Ÿç·´'}
        >>> is_valid = validate_skill_assessment(assessment)
        >>> print(is_valid)
        True
    """
    required_fields = ['skill', 'score', 'level']
    if not all(field in assessment for field in required_fields):
        return False

    if not 0 <= assessment.get('score', -1) <= 100:
        return False

    valid_levels = ['æ–°æ‰‹', 'åˆç´š', 'ä¸­ç´š', 'ç†Ÿç·´', 'å°ˆå®¶']
    if assessment.get('level') not in valid_levels:
        return False

    return True
